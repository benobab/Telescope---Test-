{"version":3,"sources":["meteor://üíªapp/packages/telescope_subscribe-to-posts/package-i18n.js","meteor://üíªapp/lib/subscribe-to-posts.js","meteor://üíªapp/lib/server/publications.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ar.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/bg.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/cs.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/da.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/de.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/el.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/en.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/es.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/et.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/fr.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/hu.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/id.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/it.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ja.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/kk.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ko.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/nl.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/pl.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/pt-BR.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ro.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ru.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/sl.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/sv.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/th.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/tr.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/vi.i18n.js","meteor://üíªapp/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/zh-CN.i18n.js"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oG","file":"/packages/telescope_subscribe-to-posts.js","sourcesContent":["TAPi18n.packages[\"telescope:subscribe-to-posts\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n","Users.addField({\n  fieldName: 'telescope.subscribedItems',\n  fieldSchema: {\n    type: Object,\n    optional: true,\n    blackbox: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nPosts.addField({\n  fieldName: 'subscribers',\n  fieldSchema: {\n    type: [String],\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nPosts.addField({\n  fieldName: 'subscriberCount',\n  fieldSchema: {\n    type: Number,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nTelescope.modules.add(\"profileEdit\", {\n  template: 'user_subscribed_posts',\n  order: 5\n});\n\nTelescope.modules.add(\"commentThreadBottom\", {\n  template: 'post_subscribe',\n  order: 10\n});\n\nPosts.views.add(\"userSubscribedPosts\", function (terms) {\n  var user = Meteor.users.findOne(terms.userId),\n      postsIds = [];\n\n  if (user && user.telescope.subscribedItems && user.telescope.subscribedItems.Posts) {\n    postsIds = _.pluck(user.telescope.subscribedItems.Posts, \"itemId\");\n  }\n\n  return {\n    find: {_id: {$in: postsIds}},\n    options: {limit: 5, sort: {postedAt: -1}}\n  };\n});\n\nvar hasSubscribedItem = function (item, user) {\n  return item.subscribers && item.subscribers.indexOf(user._id) != -1;\n};\n\nvar addSubscribedItem = function (userId, item, collectionName) {\n  var field = 'telescope.subscribedItems.' + collectionName;\n  var add = {};\n  add[field] = item;\n  Meteor.users.update({_id: userId}, {\n    $addToSet: add\n  });\n};\n\nvar removeSubscribedItem = function (userId, itemId, collectionName) {\n  var field = 'telescope.subscribedItems.' + collectionName;\n  var remove = {};\n  remove[field] = {itemId: itemId};\n  Meteor.users.update({_id: userId}, {\n    $pull: remove\n  });\n};\n\nsubscribeItem = function (collection, itemId, user) {\n  var item = collection.findOne(itemId),\n      collectionName = collection._name.slice(0,1).toUpperCase() + collection._name.slice(1);\n\n  if (!user || !item || hasSubscribedItem(item, user))\n    return false;\n\n  // author can't subscribe item\n  if (item.userId && item.userId === user._id)\n    return false\n\n  // Subscribe\n  var result = collection.update({_id: itemId, subscribers: { $ne: user._id }}, {\n    $addToSet: {subscribers: user._id},\n    $inc: {subscriberCount: 1}\n  });\n\n  if (result > 0) {\n    // Add item to list of subscribed items\n    var obj = {\n      itemId: item._id,\n      subscribedAt: new Date()\n    };\n    addSubscribedItem(user._id, obj, collectionName);\n  }\n\n  return true;\n};\n\nunsubscribeItem = function (collection, itemId, user) {\n  var user = Meteor.user(),\n      item = collection.findOne(itemId),\n      collectionName = collection._name.slice(0,1).toUpperCase()+collection._name.slice(1);\n\n  if (!user || !item  || !hasSubscribedItem(item, user))\n    return false;\n\n  // Unsubscribe\n  var result = collection.update({_id: itemId, subscribers: user._id }, {\n    $pull: {subscribers: user._id},\n    $inc: {subscriberCount: -1}\n  });\n\n  if (result > 0) {\n    // Remove item from list of subscribed items\n    removeSubscribedItem(user._id, itemId, collectionName);\n  }\n  return true;\n};\n\nMeteor.methods({\n  subscribePost: function(postId) {\n    check(postId, String);\n    return subscribeItem.call(this, Posts, postId, Meteor.user());\n  },\n  unsubscribePost: function(postId) {\n    check(postId, String);\n    return unsubscribeItem.call(this, Posts, postId, Meteor.user());\n  }\n});\n","Meteor.publish('userSubscribedPosts', function(terms) {\n\n  terms.userId = this.userId; // add userId to terms\n\n  var parameters = Posts.parameters.get(terms);\n  var posts = Posts.find(parameters.find, parameters.options);\n  return posts;\n});\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ar\"])) {\n  TAPi18n.translations[\"ar\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ar\"][namespace])) {\n  TAPi18n.translations[\"ar\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ar\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ar\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"bg\"])) {\n  TAPi18n.translations[\"bg\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"bg\"][namespace])) {\n  TAPi18n.translations[\"bg\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"bg\"][namespace], {});\nTAPi18n._registerServerTranslator(\"bg\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"cs\"])) {\n  TAPi18n.translations[\"cs\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"cs\"][namespace])) {\n  TAPi18n.translations[\"cs\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"cs\"][namespace], {\"subscribed_posts\":\"Odeb√≠ran√© p≈ô√≠spƒõvky\",\"subscribe_to_thread\":\"Odeb√≠rat koment√°≈ôe\",\"unsubscribe_from_thread\":\"Odhl√°sit se z odbƒõru koment√°≈ô≈Ø\"});\nTAPi18n._registerServerTranslator(\"cs\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"da\"])) {\n  TAPi18n.translations[\"da\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"da\"][namespace])) {\n  TAPi18n.translations[\"da\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"da\"][namespace], {});\nTAPi18n._registerServerTranslator(\"da\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"de\"])) {\n  TAPi18n.translations[\"de\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"de\"][namespace])) {\n  TAPi18n.translations[\"de\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"de\"][namespace], {});\nTAPi18n._registerServerTranslator(\"de\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"el\"])) {\n  TAPi18n.translations[\"el\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"el\"][namespace])) {\n  TAPi18n.translations[\"el\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"el\"][namespace], {});\nTAPi18n._registerServerTranslator(\"el\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"subscribed_posts\":\"Subscribed Posts\",\"subscribe_to_thread\":\"Subscribe to comment thread\",\"unsubscribe_from_thread\":\"Unsubscribe from comment thread\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\nTAPi18n._registerServerTranslator(\"en\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"es\"])) {\n  TAPi18n.translations[\"es\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"es\"][namespace])) {\n  TAPi18n.translations[\"es\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"es\"][namespace], {\"subscribed_posts\":\"Posts suscritos\",\"subscribe_to_thread\":\"Suscribirse a esta conversaci√≥n\",\"unsubscribe_from_thread\":\"Cancelar la suscripci√≥n a esta conversaci√≥n\"});\nTAPi18n._registerServerTranslator(\"es\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"et\"])) {\n  TAPi18n.translations[\"et\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"et\"][namespace])) {\n  TAPi18n.translations[\"et\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"et\"][namespace], {\"subscribed_posts\":\"Tellitud postitused\",\"subscribe_to_thread\":\"Liitu, et teemat kommenteerida\",\"unsubscribe_from_thread\":\"Loobu teema kommenteerimisest\"});\nTAPi18n._registerServerTranslator(\"et\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"fr\"])) {\n  TAPi18n.translations[\"fr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"fr\"][namespace])) {\n  TAPi18n.translations[\"fr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"fr\"][namespace], {\"subscribed_posts\":\"Posts auxquels vous √™tes abonn√©s\",\"subscribe_to_thread\":\"S'abonner au fil de commentaires\",\"unsubscribe_from_thread\":\"Se d√©sabonner du fil de commentaires\"});\nTAPi18n._registerServerTranslator(\"fr\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"hu\"])) {\n  TAPi18n.translations[\"hu\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"hu\"][namespace])) {\n  TAPi18n.translations[\"hu\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"hu\"][namespace], {});\nTAPi18n._registerServerTranslator(\"hu\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"id\"])) {\n  TAPi18n.translations[\"id\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"id\"][namespace])) {\n  TAPi18n.translations[\"id\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"id\"][namespace], {\"subscribed_posts\":\"Postingan yang Terlanggan\",\"subscribe_to_thread\":\"Berlangganan komentar thread ini\",\"unsubscribe_from_thread\":\"Berhenti berlangganan dari komentar thread ini\"});\nTAPi18n._registerServerTranslator(\"id\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"it\"])) {\n  TAPi18n.translations[\"it\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"it\"][namespace])) {\n  TAPi18n.translations[\"it\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"it\"][namespace], {});\nTAPi18n._registerServerTranslator(\"it\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ja\"])) {\n  TAPi18n.translations[\"ja\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ja\"][namespace])) {\n  TAPi18n.translations[\"ja\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ja\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ja\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"kk\"])) {\n  TAPi18n.translations[\"kk\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"kk\"][namespace])) {\n  TAPi18n.translations[\"kk\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"kk\"][namespace], {});\nTAPi18n._registerServerTranslator(\"kk\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ko\"])) {\n  TAPi18n.translations[\"ko\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ko\"][namespace])) {\n  TAPi18n.translations[\"ko\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ko\"][namespace], {\"subscribed_posts\":\"Íµ¨ÎèÖ Í≤åÏãúÎ¨º\",\"subscribe_to_thread\":\"ÎåìÍ∏Ä Íµ¨ÎèÖÌïòÍ∏∞\",\"unsubscribe_from_thread\":\"ÎåìÍ∏Ä Íµ¨ÎèÖÏ∑®ÏÜå\"});\nTAPi18n._registerServerTranslator(\"ko\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"nl\"])) {\n  TAPi18n.translations[\"nl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"nl\"][namespace])) {\n  TAPi18n.translations[\"nl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"nl\"][namespace], {});\nTAPi18n._registerServerTranslator(\"nl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"pl\"])) {\n  TAPi18n.translations[\"pl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"pl\"][namespace])) {\n  TAPi18n.translations[\"pl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"pl\"][namespace], {\"subscribed_posts\":\"Posty kt√≥re subskrybujesz\",\"subscribe_to_thread\":\"Subskrybuj\",\"unsubscribe_from_thread\":\"Nie subskrybuj\"});\nTAPi18n._registerServerTranslator(\"pl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"pt-BR\"])) {\n  TAPi18n.translations[\"pt-BR\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"pt-BR\"][namespace])) {\n  TAPi18n.translations[\"pt-BR\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"pt-BR\"][namespace], {\"subscribed_posts\":\"Postagens inscritas\",\"subscribe_to_thread\":\"Inscreva-se aos coment√°rios\",\"unsubscribe_from_thread\":\"Desinscreva-se dos coment√°rios\"});\nTAPi18n._registerServerTranslator(\"pt-BR\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ro\"])) {\n  TAPi18n.translations[\"ro\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ro\"][namespace])) {\n  TAPi18n.translations[\"ro\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ro\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ro\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ru\"])) {\n  TAPi18n.translations[\"ru\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ru\"][namespace])) {\n  TAPi18n.translations[\"ru\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ru\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ru\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"sl\"])) {\n  TAPi18n.translations[\"sl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"sl\"][namespace])) {\n  TAPi18n.translations[\"sl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"sl\"][namespace], {\"subscribed_posts\":\"Naroƒçnine na Objave\",\"subscribe_to_thread\":\"Naroƒçite se na komentarje\",\"unsubscribe_from_thread\":\"Odjavite se od komentarjev\"});\nTAPi18n._registerServerTranslator(\"sl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"sv\"])) {\n  TAPi18n.translations[\"sv\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"sv\"][namespace])) {\n  TAPi18n.translations[\"sv\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"sv\"][namespace], {\"subscribed_posts\":\"Bevakade inl√§gg\",\"subscribe_to_thread\":\"Prenumerera p√• kommentarstr√•d\",\"unsubscribe_from_thread\":\"Avprenumerera p√• kommentarstr√•d\"});\nTAPi18n._registerServerTranslator(\"sv\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"th\"])) {\n  TAPi18n.translations[\"th\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"th\"][namespace])) {\n  TAPi18n.translations[\"th\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"th\"][namespace], {});\nTAPi18n._registerServerTranslator(\"th\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"tr\"])) {\n  TAPi18n.translations[\"tr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"tr\"][namespace])) {\n  TAPi18n.translations[\"tr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"tr\"][namespace], {});\nTAPi18n._registerServerTranslator(\"tr\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"vi\"])) {\n  TAPi18n.translations[\"vi\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"vi\"][namespace])) {\n  TAPi18n.translations[\"vi\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"vi\"][namespace], {});\nTAPi18n._registerServerTranslator(\"vi\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"])) {\n  TAPi18n.translations[\"zh-CN\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"][namespace])) {\n  TAPi18n.translations[\"zh-CN\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"zh-CN\"][namespace], {});\nTAPi18n._registerServerTranslator(\"zh-CN\", namespace);\n"]}