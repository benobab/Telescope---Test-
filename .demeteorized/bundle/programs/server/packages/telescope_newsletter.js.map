{"version":3,"sources":["meteor://💻app/packages/telescope_newsletter/package-i18n.js","meteor://💻app/lib/newsletter.js","meteor://💻app/lib/server/campaign.js","meteor://💻app/lib/server/cron.js","meteor://💻app/lib/server/mailchimp.js","meteor://💻app/lib/server/routes.js","meteor://💻app/packages/telescope_newsletter/lib/server/templates/handlebars.emailDigest.js","meteor://💻app/packages/telescope_newsletter/lib/server/templates/handlebars.emailDigestConfirmation.js","meteor://💻app/packages/telescope_newsletter/lib/server/templates/handlebars.emailPostItem.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/ar.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/bg.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/cs.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/da.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/de.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/el.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/en.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/es.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/et.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/fr.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/hu.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/id.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/it.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/ja.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/kk.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/ko.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/nl.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/pl.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/pt-BR.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/ro.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/ru.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/sl.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/sv.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/th.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/tr.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/vi.i18n.js","meteor://💻app/packages/telescope_newsletter/packages/telescope_newsletteri18n/zh-CN.i18n.js"],"names":[],"mappings":"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AE;AAC1E,MAAI,gBAAgB,GAAG,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,yBAAyB,CAAC,CAAC;AAC5E,QAAI,EAAE,mBAAmB;AACzB,kBAAc,EAAE,oBAAoB;AACpC,WAAO,EAAE,4BAA4B;GACtC,CAAC,CAAC;AACH,KAAG,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC,CAAC;CAC1D,CAAC,CAAC,sH;;;;;;;;;;;;;;;;;;AChBH,06D;;;;;;;;;;;;;;;;;;ACAA,oe;;;;;;;;;;;;;;;;;;ACAA,4gE;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H","file":"/packages/telescope_newsletter.js","sourcesContent":["TAPi18n.packages[\"telescope:newsletter\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n","var campaignSchema = new SimpleSchema({\n _id: {\n    type: String,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    optional: true\n  },\n  sentAt: {\n    type: String,\n    optional: true\n  },\n  status: {\n    type: String,\n    optional: true\n  },\n  posts: {\n    type: [String],\n    optional: true\n  },\n  webHits: {\n    type: Number,\n    optional: true\n  },\n});\n\nCampaigns = new Meteor.Collection(\"campaigns\", {\n  schema: campaignSchema\n});\n\nPosts.addField({\n  fieldName: 'scheduledAt',\n  fieldSchema: {\n    type: Date,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nUsers.addField([\n  {\n    fieldName: 'telescope.newsletter.showBanner',\n    fieldSchema: {\n      label: 'Show banner',\n      type: Boolean,\n      optional: true,\n      editableBy: ['admin', 'member'],\n      autoform: {\n        omit: true\n      }\n    }\n  },\n  {\n    fieldName: 'telescope.newsletter.subscribeToNewsletter',\n    fieldSchema: {\n      label: 'Subscribe to newsletter',\n      type: Boolean,\n      optional: true,\n      editableBy: ['admin', 'member'],\n      autoform: {\n        omit: true\n      }\n    }\n  }\n]);\n\n// Settings\n\nSettings.addField([\n  {\n    fieldName: 'enableNewsletter',\n    fieldSchema: {\n      type: Boolean,\n      optional: true,\n      autoform: {\n        group: 'newsletter',\n        instructions: 'Enable newsletter (requires restart).'\n      }\n    }\n  },\n  {\n    fieldName: 'showBanner',\n    fieldSchema: {\n      type: Boolean,\n      optional: true,\n      label: 'Newsletter banner',\n      autoform: {\n        group: 'newsletter',\n        instructions: 'Show newsletter sign-up form on the front page.'\n      }\n    }\n  },\n  {\n    fieldName: \"mailChimpAPIKey\",\n    fieldSchema: {\n      type: String,\n      optional: true,\n      private: true,\n      autoform: {\n        group: \"newsletter\",\n        class: \"private-field\"\n      }\n    }\n  },\n  {\n    fieldName: 'mailChimpListId',\n    fieldSchema: {\n      type: String,\n      optional: true,\n      private: true,\n      autoform: {\n        group: 'newsletter',\n        instructions: 'The ID of the list you want to send to.',\n        class: \"private-field\"\n      }\n    }\n  },\n  {\n    fieldName: 'postsPerNewsletter',\n    fieldSchema: {\n      type: Number,\n      optional: true,\n      autoform: {\n        group: 'newsletter'\n      }\n    }\n  },\n  {\n    fieldName: 'newsletterFrequency',\n    fieldSchema: {\n      type: [Number],\n      optional: true,\n      autoform: {\n        group: 'newsletter',\n        instructions: 'Defaults to once a week on Monday. Changes require restarting your app to take effect.',\n        noselect: true,\n        options: [\n          {\n            value: 1,\n            label: 'Sunday'\n          },\n          {\n            value: 2,\n            label: 'Monday'\n          },\n          {\n            value: 3,\n            label: 'Tuesday'\n          },\n          {\n            value: 4,\n            label: 'Wednesday'\n          },\n          {\n            value: 5,\n            label: 'Thursday'\n          },\n          {\n            value: 6,\n            label: 'Friday'\n          },\n          {\n            value: 7,\n            label: 'Saturday'\n          }\n        ]\n      }\n    }\n  },\n  {\n    fieldName: 'newsletterTime',\n    fieldSchema: {\n      type: String,\n      optional: true,\n      defaultValue: '00:00',\n      autoform: {\n        group: 'newsletter',\n        instructions: 'Defaults to 00:00/12:00 AM. Time to send out newsletter if enabled.',\n        type: 'time'\n      }\n    }\n  },\n  {\n    fieldName: 'autoSubscribe',\n    fieldSchema: {\n      type: Boolean,\n      optional: true,\n      autoform: {\n        group: 'newsletter',\n        instructions: 'Automatically subscribe new users on sign-up.'\n      }\n    }\n  }\n]);\n\n// create new \"campaign\" lens for all posts from the past X days that haven't been scheduled yet\nPosts.views.add(\"campaign\", function (terms) {\n  return {\n    find: {\n      scheduledAt: {$exists: false},\n      postedAt: {\n        $gte: terms.after\n      }\n    },\n    options: {sort: {baseScore: -1}}\n  };\n});\n\nTelescope.modules.add(\"contentTop\", {\n  template: 'newsletter_banner',\n  order: 1,\n  only: [\"postsDefault\"]\n});\n\n function subscribeUserOnProfileCompletion (user) {\n  if (!!Settings.get('autoSubscribe') && !!Users.getEmail(user)) {\n    addToMailChimpList(user, false, function (error, result) {\n      console.log(error);\n      console.log(result);\n    });\n  }\n  return user;\n}\nTelescope.callbacks.add(\"profileCompletedAsync\", subscribeUserOnProfileCompletion);\n","defaultFrequency = 7;\ndefaultPosts = 5;\n\ngetCampaignPosts = function (postsCount) {\n\n  // look for last scheduled campaign in the database\n  var lastCampaign = SyncedCron._collection.findOne({name: 'scheduleNewsletter'}, {sort: {finishedAt: -1}, limit: 1});\n\n  // if there is a last campaign use its date, else default to posts from the last 7 days\n  var lastWeek = moment().subtract(7, 'days').toDate();\n  var after = (typeof lastCampaign !== 'undefined') ? lastCampaign.finishedAt : lastWeek\n\n  var params = Posts.parameters.get({\n    view: 'campaign',\n    limit: postsCount,\n    after: after\n  });\n  return Posts.find(params.find, params.options).fetch();\n};\n\nbuildCampaign = function (postsArray) {\n  var postsHTML = '', subject = '';\n\n  // 1. Iterate through posts and pass each of them through a handlebars template\n  postsArray.forEach(function (post, index) {\n    if(index > 0)\n      subject += ', ';\n\n    subject += post.title;\n\n    var postUser = Meteor.users.findOne(post.userId);\n\n    // the naked post object as stored in the database is missing a few properties, so let's add them\n    var properties = _.extend(post, {\n      authorName: post.getAuthorName(),\n      postLink: Posts.getLink(post, true),\n      profileUrl: Users.getProfileUrl(postUser, true),\n      postPageLink: Posts.getPageUrl(post, true),\n      date: moment(post.postedAt).format(\"MMMM D YYYY\"),\n      authorAvatarUrl: Avatar.getUrl(postUser)\n    });\n\n    try {\n      HTTP.get(post.authorAvatarUrl);\n    } catch (error) {\n      post.authorAvatarUrl = false;\n    }\n\n    if (post.body) {\n      properties.body = Telescope.utils.trimHTML(post.htmlBody, 20);\n    }\n\n    if (post.commentCount > 0)\n      properties.popularComments = Comments.find({postId: post._id}, {sort: {score: -1}, limit: 2, transform: function (comment) {\n        var user = Meteor.users.findOne(comment.userId);\n\n        comment.body = Telescope.utils.trimHTML(comment.htmlBody, 20);\n        comment.authorProfileUrl = Users.getProfileUrl(user, true);\n        comment.authorAvatarUrl = Avatar.getUrl(user);\n\n        try {\n          HTTP.get(comment.authorAvatarUrl);\n        } catch (error) {\n          comment.authorAvatarUrl = false;\n        }\n        return comment;\n      }}).fetch();\n\n    if(post.url) {\n      properties.domain = Telescope.utils.getDomain(post.url);\n    }\n\n    if (properties.thumbnailUrl) {\n      properties.thumbnailUrl = Telescope.utils.addHttp(properties.thumbnailUrl);\n    }\n\n    postsHTML += Telescope.email.getTemplate('emailPostItem')(properties);\n  });\n\n  // 2. Wrap posts HTML in digest template\n  var digestHTML = Telescope.email.getTemplate('emailDigest')({\n    siteName: Settings.get('title'),\n    date: moment().format(\"dddd, MMMM Do YYYY\"),\n    content: postsHTML\n  });\n\n  // 3. wrap digest HTML in email wrapper template\n  var emailHTML = Telescope.email.buildTemplate(digestHTML);\n\n  var campaign = {\n    postIds: _.pluck(postsArray, '_id'),\n    subject: Telescope.utils.trimWords(subject, 15),\n    html: emailHTML\n  };\n\n  return campaign;\n};\n\nscheduleNextCampaign = function (isTest) {\n  isTest = !! isTest;\n  var posts = getCampaignPosts(Settings.get('postsPerNewsletter', defaultPosts));\n  if(!!posts.length){\n    return scheduleCampaign(buildCampaign(posts), isTest);\n  }else{\n    var result = 'No posts to schedule today…';\n    return result;\n  }\n};\n\nMeteor.methods({\n  sendCampaign: function () {\n    if(Users.is.adminById(this.userId))\n      return scheduleNextCampaign(false);\n  },\n  testCampaign: function () {\n    if(Users.is.adminById(this.userId))\n      return scheduleNextCampaign(true);\n  }\n});\n","SyncedCron.options = {\n  log: false,\n  collectionName: 'cronHistory',\n  utc: false,\n  collectionTTL: 172800\n};\n\nvar defaultFrequency = 7; // once a week\nvar defaultTime = '00:00';\n\nvar getSchedule = function (parser) {\n  var frequency = Settings.get('newsletterFrequency', defaultFrequency);\n  var recur = parser.recur();\n  var schedule;\n\n\n  // Default is once a week (Mondays)\n  if (!!frequency) {\n    schedule = recur.on(frequency).dayOfWeek();\n  }\n  else {\n    schedule = recur.on(2).dayOfWeek();\n  }\n\n  return schedule.on(Settings.get('newsletterTime', defaultTime)).time();\n};\n\nMeteor.methods({\n  getNextJob: function () {\n    var nextJob = SyncedCron.nextScheduledAtDate('scheduleNewsletter');\n    console.log(nextJob);\n    return nextJob;\n  }\n});\n\nvar addJob = function () {\n  SyncedCron.add({\n    name: 'scheduleNewsletter',\n    schedule: function(parser) {\n      // parser is a later.parse object\n      return getSchedule(parser);\n    },\n    job: function() {\n      // only schedule newsletter campaigns in production\n      if (process.env.NODE_ENV === \"production\") {\n        scheduleNextCampaign();\n      }\n    }\n  });\n};\nMeteor.startup(function () {\n  if (Settings.get('enableNewsletter', false)) {\n    addJob();\n  }\n});\n","var htmlToText = Npm.require('html-to-text');\n\nscheduleCampaign = function (campaign, isTest) {\n  var isTest = typeof isTest === 'undefined' ? false : isTest;\n\n  var apiKey = Settings.get('mailChimpAPIKey');\n  var listId = Settings.get('mailChimpListId');\n\n  if(!!apiKey && !!listId){\n\n\t\tvar wordCount = 15;\n\t\tvar subject = campaign.subject;\n\t\twhile (subject.length >= 150){\n\t\t\tsubject = Telescope.utils.trimWords(subject, wordCount);\n\t\t\twordCount--;\n\t\t}\n\n    try {\n\n      var api = new MailChimp(apiKey);\n      var text = htmlToText.fromString(campaign.html, {wordwrap: 130});\n      var defaultEmail = Settings.get('defaultEmail');\n      var campaignOptions = {\n        type: 'regular',\n        options: {\n          list_id: listId,\n          subject: subject,\n          from_email: defaultEmail,\n          from_name: Settings.get('title')+ ' Top Posts',\n        },\n        content: {\n          html: campaign.html,\n          text: text\n        }\n      };\n\n      console.log( '// Creating campaign…');\n\n      // create campaign\n      var mailchimpCampaign = api.call( 'campaigns', 'create', campaignOptions);\n\n      console.log( '// Campaign created');\n      // console.log(campaign)\n\n      var scheduledTime = moment().utcOffset(0).add(1, 'hours').format(\"YYYY-MM-DD HH:mm:ss\");\n\n      var scheduleOptions = {\n        cid: mailchimpCampaign.id,\n        schedule_time: scheduledTime\n      };\n\n      // schedule campaign\n      var schedule = api.call('campaigns', 'schedule', scheduleOptions);\n\n      console.log('// Campaign scheduled for '+scheduledTime);\n      // console.log(schedule)\n\n      // if this is not a test, mark posts as sent\n      if (!isTest)\n        var updated = Posts.update({_id: {$in: campaign.postIds}}, {$set: {scheduledAt: new Date()}}, {multi: true})\n\n      // send confirmation email\n      var confirmationHtml = Telescope.email.getTemplate('emailDigestConfirmation')({\n        time: scheduledTime,\n        newsletterLink: mailchimpCampaign.archive_url,\n        subject: subject\n      });\n      Telescope.email.send(defaultEmail, 'Newsletter scheduled', Telescope.email.buildTemplate(confirmationHtml));\n\n    } catch (error) {\n      console.log(error);\n    }\n    return subject;\n  }\n};\n\naddToMailChimpList = function(userOrEmail, confirm, done){\n\n  var user, email;\n\n  var confirm = (typeof confirm === 'undefined') ? false : confirm; // default to no confirmation\n\n  // not sure if it's really necessary that the function take both user and email?\n  if (typeof userOrEmail === \"string\") {\n    user = null;\n    email = userOrEmail;\n  } else if (typeof userOrEmail === \"object\") {\n    user = userOrEmail;\n    email = Users.getEmail(user);\n    if (!email)\n      throw 'User must have an email address';\n  }\n\n  var apiKey = Settings.get('mailChimpAPIKey');\n  var listId = Settings.get('mailChimpListId');\n\n  // add a user to a MailChimp list.\n  // called when a new user is created, or when an existing user fills in their email\n  if(!!apiKey && !!listId){\n\n    try {\n\n      console.log('// Adding \"'+email+'\" to MailChimp list…');\n\n      var api = new MailChimp(apiKey);\n      var subscribeOptions = {\n        id: listId,\n        email: {\"email\": email},\n        double_optin: confirm\n      };\n\n      // subscribe user\n      var subscribe = api.call('lists', 'subscribe', subscribeOptions);\n\n      // mark user as subscribed\n      if (!!user) {\n        Users.setSetting(user, 'newsletter.subscribeToNewsletter', true);\n      }\n\n      console.log(\"// User subscribed\");\n\n      return subscribe;\n\n    } catch (error) {\n      throw new Meteor.Error(\"subscription-failed\", error.message);\n    }\n  }\n};\n\nMeteor.methods({\n  addCurrentUserToMailChimpList: function(){\n    var currentUser = Meteor.users.findOne(this.userId);\n    try {\n      return addToMailChimpList(currentUser, false);\n    } catch (error) {\n      throw new Meteor.Error(500, error.message);\n    }\n  },\n  addEmailToMailChimpList: function (email) {\n    try {\n      return addToMailChimpList(email, true);\n    } catch (error) {\n      throw new Meteor.Error(500, error.message);\n    }\n  }\n});\n","// Notification email\nPicker.route('/email/campaign', function(params, req, res, next) {\n  var campaign = buildCampaign(getCampaignPosts(Settings.get('postsPerNewsletter', 5)));\n  var campaignSubject = '<div class=\"campaign-subject\"><strong>Subject:</strong> '+campaign.subject+' (note: contents might change)</div>';\n  var campaignSchedule = '<div class=\"campaign-schedule\"><strong>Scheduled for:</strong> '+ Meteor.call('getNextJob') +'</div>';\n  res.end(campaignSubject+campaignSchedule+campaign.html);\n});\n\n// Notification email\nPicker.route('/email/digest-confirmation', function(params, req, res, next) {\n  var confirmationHtml = Telescope.email.getTemplate('emailDigestConfirmation')({\n    time: 'January 1st, 1901',\n    newsletterLink: 'http://example.com',\n    subject: 'Lorem ipsum dolor sit amet'\n  });\n  res.end(Telescope.email.buildTemplate(confirmationHtml));\n});","Handlebars = Handlebars || {};Handlebars.templates = Handlebars.templates || {} ;var template = OriginalHandlebars.compile(\"<style type=\\\"text/css\\\">\\n  .email-digest{\\n  }\\n  .digest-date{\\n    color: #999;\\n    font-weight: normal;\\n    font-size: 16px;\\n  }\\n  .post-item{\\n    border-top: 1px solid #ddd;\\n  }\\n  .post-date{\\n    font-size: 13px;\\n    color: #999;\\n  }\\n  .post-title{\\n    font-size: 18px;\\n    line-height: 1.6;\\n  }\\n  .post-thumbnail{\\n    height: 28px;\\n    width: 37px;\\n    vertical-align: top;\\n  }\\n  .post-meta{\\n    font-size: 13px;\\n    color: #999;\\n    margin: 5px 0;\\n  }\\n  .post-meta a{\\n    color: #333;\\n  }  \\n  .post-domain{\\n    font-weight: bold;\\n  }\\n  .post-body-excerpt{\\n    font-size: 14px;\\n  }\\n  .post-body-excerpt p{\\n    margin: 0;\\n  }\\n  .post-comments {\\n    margin-top: 10px;\\n  }\\n  .post-comment {\\n    padding: 10px;\\n    background: #efefef;\\n    margin-bottom: 5px;\\n  }\\n  .post-comment:last-child {\\n    margin-bottom: 0;\\n  }\\n  .post-comments-title {\\n    font-size: 16px;\\n    font-weight: bold;\\n    margin-bottom: 10px;\\n  }\\n  .post-comment-body{\\n    font-size: 14px;\\n  }\\n  .post-comment-author {\\n    padding-bottom: 5px;\\n    margin-bottom: 5px;\\n    border-bottom: 1px solid #ccc;\\n  }\\n  .avatar {\\n    height: 20px;\\n    width: 20px;\\n    display: inline-block;\\n    vertical-align: middle;\\n    border-radius: 100%;\\n  }\\n  .post-comment-author-name {\\n    line-height: 20px;\\n    vertical-align: middle;\\n    font-size: 13px;\\n  }\\n  .post-comment-author-link {\\n    color: black;\\n  }\\n</style>\\n\\n<span class=\\\"heading\\\">Recently on {{siteName}}</span>\\n<span class=\\\"digest-date\\\">– {{date}}</span>\\n<br><br>\\n\\n<div class=\\\"email-digest\\\">\\n  {{{content}}}\\n</div>\\n<br>\");Handlebars.templates[\"emailDigest\"] = function (data, partials) { partials = (partials || {});return template(data || {}, { helpers: OriginalHandlebars.helpers,partials: partials,name: \"emailDigest\"});};","Handlebars = Handlebars || {};Handlebars.templates = Handlebars.templates || {} ;var template = OriginalHandlebars.compile(\"<span class=\\\"heading\\\">Newsletter scheduled for {{time}}</span><br><br>\\n\\n<a href=\\\"{{newsletterLink}}\\\">{{subject}}</a><br><br>\");Handlebars.templates[\"emailDigestConfirmation\"] = function (data, partials) { partials = (partials || {});return template(data || {}, { helpers: OriginalHandlebars.helpers,partials: partials,name: \"emailDigestConfirmation\"});};","Handlebars = Handlebars || {};Handlebars.templates = Handlebars.templates || {} ;var template = OriginalHandlebars.compile(\"<div class=\\\"post-item\\\">\\n<br >\\n\\n<span class=\\\"post-title\\\">\\n  {{#if thumbnailUrl}}\\n    <img class=\\\"post-thumbnail\\\" src=\\\"{{thumbnailUrl}}\\\"/>&nbsp;\\n  {{/if}}\\n\\n  <a href=\\\"{{postLink}}\\\" target=\\\"_blank\\\">{{title}}</a>\\n</span>\\n\\n<div class=\\\"post-meta\\\">\\n  {{#if domain}}\\n    <a class=\\\"post-domain\\\" href=\\\"\\\">{{domain}}</a>\\n    |\\n  {{/if}}\\n\\n  <span class=\\\"post-submitted\\\">\\n    {{#if profileUrl}}\\n      Submitted by <a href=\\\"{{profileUrl}}\\\" class=\\\"comment-link\\\" target=\\\"_blank\\\">{{authorName}}</a>\\n    {{else}}\\n      Submitted by {{authorName}}\\n    {{/if}}\\n  </span>\\n\\n  <span class=\\\"post-date\\\">on {{date}}</span>\\n  |\\n  <a href=\\\"{{postPageLink}}\\\" class=\\\"comment-link\\\" target=\\\"_blank\\\">{{commentCount}} Comments</a>\\n</div>\\n\\n\\n{{#if body}}\\n  <div class=\\\"post-body-excerpt\\\">\\n    {{body}}\\n    <a href=\\\"{{postPageLink}}\\\" class=\\\"comment-link\\\" target=\\\"_blank\\\">Read more</a>\\n  </div>\\n{{/if}}\\n\\n{{#if popularComments}}\\n  <div class=\\\"post-comments\\\">\\n    <div class=\\\"post-comments-title\\\">Top Comments</div>\\n    {{#each popularComments}}\\n      <div class=\\\"post-comment\\\">\\n        <div class=\\\"post-comment-author\\\">\\n          {{#if authorAvatarUrl}}\\n            <img class=\\\"post-comment-avatar avatar\\\" src=\\\"{{authorAvatarUrl}}\\\"/>\\n          {{/if}}\\n          <span class=\\\"post-comment-author-name\\\">\\n            <a href=\\\"{{authorProfileUrl}}\\\" class=\\\"post-comment-author-link\\\">\\n              {{author}}\\n            </a>\\n          </span>\\n        </div>\\n        <div class=\\\"post-comment-body\\\">{{body}}</div>\\n      </div>\\n    {{/each}}\\n    <a class=\\\"post-comments-discuss\\\" href=\\\"{{postPageLink}}\\\">Discuss</a>\\n  </div>\\n{{/if}}\\n\\n<br>\\n</div>\\n\");Handlebars.templates[\"emailPostItem\"] = function (data, partials) { partials = (partials || {});return template(data || {}, { helpers: OriginalHandlebars.helpers,partials: partials,name: \"emailPostItem\"});};","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ar\"])) {\n  TAPi18n.translations[\"ar\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ar\"][namespace])) {\n  TAPi18n.translations[\"ar\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ar\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ar\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"bg\"])) {\n  TAPi18n.translations[\"bg\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"bg\"][namespace])) {\n  TAPi18n.translations[\"bg\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"bg\"][namespace], {});\nTAPi18n._registerServerTranslator(\"bg\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"cs\"])) {\n  TAPi18n.translations[\"cs\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"cs\"][namespace])) {\n  TAPi18n.translations[\"cs\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"cs\"][namespace], {\"receive_the_best_of\":\"Odebírejte to nejlepší z\",\"right_in_your_inbox\":\"přímo do vaší schránky.\",\"get_newsletter\":\"Odebírat newsletter\",\"thanks_for_subscribing\":\"Děkujeme, váš odběr je nyní aktivní!\",\"newsletter\":\"newsletter\",\"showBanner\":\"Zobrazit banner\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Počet příspěvků v newsletteru\",\"newsletterFrequency\":\"Frekvence newsletteru\",\"newsletterTime\":\"Čas newsletteru\",\"enableNewsletter\":\"Aktivovat newsletter\",\"autoSubscribe\":\"Automatický odběr\"});\nTAPi18n._registerServerTranslator(\"cs\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"da\"])) {\n  TAPi18n.translations[\"da\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"da\"][namespace])) {\n  TAPi18n.translations[\"da\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"da\"][namespace], {});\nTAPi18n._registerServerTranslator(\"da\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"de\"])) {\n  TAPi18n.translations[\"de\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"de\"][namespace])) {\n  TAPi18n.translations[\"de\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"de\"][namespace], {\"receive_the_best_of\":\"Receive the best of\",\"right_in_your_inbox\":\"right in your inbox.\",\"get_newsletter\":\"Get Newsletter\",\"thanks_for_subscribing\":\"Thanks for subscribing!\"});\nTAPi18n._registerServerTranslator(\"de\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"el\"])) {\n  TAPi18n.translations[\"el\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"el\"][namespace])) {\n  TAPi18n.translations[\"el\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"el\"][namespace], {});\nTAPi18n._registerServerTranslator(\"el\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"receive_the_best_of\":\"Receive the best of\",\"right_in_your_inbox\":\"right in your inbox.\",\"get_newsletter\":\"Get Newsletter\",\"thanks_for_subscribing\":\"Thanks for subscribing!\",\"newsletter\":\"newsletter\",\"showBanner\":\"Show Banner\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Posts per Newsletter\",\"newsletterFrequency\":\"Newsletter Frequency\",\"newsletterTime\":\"Newsletter Time\",\"enableNewsletter\":\"Enable Newsletter\",\"autoSubscribe\":\"Auto Subscribe\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\nTAPi18n._registerServerTranslator(\"en\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"es\"])) {\n  TAPi18n.translations[\"es\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"es\"][namespace])) {\n  TAPi18n.translations[\"es\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"es\"][namespace], {\"receive_the_best_of\":\"Reciba lo mejor de\",\"right_in_your_inbox\":\"directo en tu correo electrónico.\",\"get_newsletter\":\"Obtén la Newsletter\",\"thanks_for_subscribing\":\"¡Gracias por suscribirse!\",\"newsletter\":\"newsletter\"});\nTAPi18n._registerServerTranslator(\"es\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"et\"])) {\n  TAPi18n.translations[\"et\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"et\"][namespace])) {\n  TAPi18n.translations[\"et\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"et\"][namespace], {\"receive_the_best_of\":\"Saa parimad\",\"right_in_your_inbox\":\"otse teie postkasti.\",\"get_newsletter\":\"Liitu uudiskirjaga\",\"thanks_for_subscribing\":\"Täname liitumast!\",\"newsletter\":\"uudiskiri\",\"showBanner\":\"Näita Bännerit\",\"mailChimpAPIKey\":\"MailChimp API võti\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Postitusi Uudiskirja kohta\",\"newsletterFrequency\":\"Uudiskirja Sagedus-\",\"newsletterTime\":\"Uudiskirja saatmise Aeg\",\"enableNewsletter\":\"Luba Uudiskiri\",\"autoSubscribe\":\"Automaatne Liitumine\"});\nTAPi18n._registerServerTranslator(\"et\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"fr\"])) {\n  TAPi18n.translations[\"fr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"fr\"][namespace])) {\n  TAPi18n.translations[\"fr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"fr\"][namespace], {\"receive_the_best_of\":\"Recevez le meilleur de\",\"right_in_your_inbox\":\"par email.\",\"get_newsletter\":\"S'abonner à la newsletter\",\"thanks_for_subscribing\":\"Merci pour votre abonnement !\",\"newsletter\":\"newsletter\",\"showBanner\":\"Afficher la Bannière\",\"mailChimpAPIKey\":\"Clé d'API MailChimp\",\"mailChimpListId\":\"ID Liste MailChimp\",\"postsPerNewsletter\":\"Posts par Newsletter\",\"newsletterFrequency\":\"Fréquence de la Newsletter\",\"newsletterTime\":\"Heure de la Newsletter\",\"enableNewsletter\":\"Activer la Newsletter\",\"autoSubscribe\":\"Auto-abonnement\"});\nTAPi18n._registerServerTranslator(\"fr\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"hu\"])) {\n  TAPi18n.translations[\"hu\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"hu\"][namespace])) {\n  TAPi18n.translations[\"hu\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"hu\"][namespace], {});\nTAPi18n._registerServerTranslator(\"hu\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"id\"])) {\n  TAPi18n.translations[\"id\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"id\"][namespace])) {\n  TAPi18n.translations[\"id\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"id\"][namespace], {\"receive_the_best_of\":\"Mau menerima postingan terbaik\\n\",\"right_in_your_inbox\":\"rutin melalui Email ?\",\"get_newsletter\":\"Dapatkan Newsletter\",\"thanks_for_subscribing\":\"Terima kasih telah berlangganan!\",\"newsletter\":\"newsletter\",\"showBanner\":\"Tampilkan Banner\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Posting per Newsletter\",\"newsletterFrequency\":\"Frekuensi Newsletter \",\"newsletterTime\":\"Waktu Newsletter\",\"enableNewsletter\":\"Aktifkan Newsletter\",\"autoSubscribe\":\"Berlangganan  Otomatis\"});\nTAPi18n._registerServerTranslator(\"id\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"it\"])) {\n  TAPi18n.translations[\"it\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"it\"][namespace])) {\n  TAPi18n.translations[\"it\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"it\"][namespace], {\"receive_the_best_of\":\"Ricevi il meglio di\",\"right_in_your_inbox\":\"direttamente nella tua casella in arrivo.\",\"get_newsletter\":\"Ottieni la Newsletter\",\"thanks_for_subscribing\":\"Grazie per la sottoscrizione!\",\"newsletter\":\"newsletter\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"newsletterFrequency\":\"Frequenza della Newsletter\",\"enableNewsletter\":\"Abilita la Newsletter\"});\nTAPi18n._registerServerTranslator(\"it\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ja\"])) {\n  TAPi18n.translations[\"ja\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ja\"][namespace])) {\n  TAPi18n.translations[\"ja\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ja\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ja\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"kk\"])) {\n  TAPi18n.translations[\"kk\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"kk\"][namespace])) {\n  TAPi18n.translations[\"kk\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"kk\"][namespace], {});\nTAPi18n._registerServerTranslator(\"kk\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ko\"])) {\n  TAPi18n.translations[\"ko\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ko\"][namespace])) {\n  TAPi18n.translations[\"ko\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ko\"][namespace], {\"thanks_for_subscribing\":\"구독 해주셔서 감사합니다!\"});\nTAPi18n._registerServerTranslator(\"ko\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"nl\"])) {\n  TAPi18n.translations[\"nl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"nl\"][namespace])) {\n  TAPi18n.translations[\"nl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"nl\"][namespace], {});\nTAPi18n._registerServerTranslator(\"nl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"pl\"])) {\n  TAPi18n.translations[\"pl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"pl\"][namespace])) {\n  TAPi18n.translations[\"pl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"pl\"][namespace], {\"receive_the_best_of\":\"Otrzymuj najlepsze z\",\"right_in_your_inbox\":\"prosto do twojej skrzynki.\",\"get_newsletter\":\"Zapisz się do Newslettera\",\"thanks_for_subscribing\":\"Dziękujemy!\",\"newsletter\":\"newsletter\",\"showBanner\":\"Pokaż Baner\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Liczba postów przypadająca na jeden Newsletter\",\"newsletterFrequency\":\"Częstotliwość Newslettera\",\"newsletterTime\":\"Godzina, w której ma być wysłany Newsletter\",\"enableNewsletter\":\"Włącz Newsletter\",\"autoSubscribe\":\"Auto Subskrybcja\"});\nTAPi18n._registerServerTranslator(\"pl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"pt-BR\"])) {\n  TAPi18n.translations[\"pt-BR\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"pt-BR\"][namespace])) {\n  TAPi18n.translations[\"pt-BR\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"pt-BR\"][namespace], {\"receive_the_best_of\":\"Receba o melhor de\",\"right_in_your_inbox\":\"direto em sua caixa de emails.\",\"get_newsletter\":\"Inscrever na Newsletter\",\"thanks_for_subscribing\":\"Obrigado por assinar!\",\"newsletter\":\"newsletter\",\"showBanner\":\"Exibir Banner\",\"mailChimpAPIKey\":\"MailChimp API Key\",\"mailChimpListId\":\"MailChimp List ID\",\"postsPerNewsletter\":\"Postagens por Newsletter\",\"newsletterFrequency\":\"Frequência Newsletter\",\"newsletterTime\":\"Hora da Newsletter\",\"enableNewsletter\":\"Habilitar Newsletter\",\"autoSubscribe\":\"Auto Inscrição\"});\nTAPi18n._registerServerTranslator(\"pt-BR\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ro\"])) {\n  TAPi18n.translations[\"ro\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ro\"][namespace])) {\n  TAPi18n.translations[\"ro\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ro\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ro\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"ru\"])) {\n  TAPi18n.translations[\"ru\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"ru\"][namespace])) {\n  TAPi18n.translations[\"ru\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"ru\"][namespace], {});\nTAPi18n._registerServerTranslator(\"ru\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"sl\"])) {\n  TAPi18n.translations[\"sl\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"sl\"][namespace])) {\n  TAPi18n.translations[\"sl\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"sl\"][namespace], {\"receive_the_best_of\":\"Prejmite najboljše\",\"right_in_your_inbox\":\"naravnost v vaš poštni predal\",\"get_newsletter\":\"Prejemajte E-novice\",\"thanks_for_subscribing\":\"Hvala za prijavo!\",\"newsletter\":\"e-novice\",\"showBanner\":\"Prika\",\"mailChimpAPIKey\":\"MailChimp API Ključ\",\"mailChimpListId\":\"MailChimp ID Seznama\",\"postsPerNewsletter\":\"Objav na E-novice\",\"newsletterFrequency\":\"Pogostost E-novic\",\"newsletterTime\":\"Čas pošiljanja E-novic\",\"enableNewsletter\":\"Omogoči E-novice\",\"autoSubscribe\":\"Samodejno Naroči\"});\nTAPi18n._registerServerTranslator(\"sl\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"sv\"])) {\n  TAPi18n.translations[\"sv\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"sv\"][namespace])) {\n  TAPi18n.translations[\"sv\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"sv\"][namespace], {\"receive_the_best_of\":\"Få det bästa av\",\"right_in_your_inbox\":\"direkt i din inkorg.\",\"get_newsletter\":\"Få Nyhetsbrev\",\"thanks_for_subscribing\":\"Tack för att du prenumererar!\",\"newsletter\":\"nyhetsbrev\",\"showBanner\":\"Visa Banner\",\"mailChimpAPIKey\":\"MailChimp API-nyckel\",\"mailChimpListId\":\"Mailchimp List-ID\",\"postsPerNewsletter\":\"Inlägg per Nyhetsbrev\",\"newsletterFrequency\":\"Nyhetsbrevsfrekvens\",\"newsletterTime\":\"Nyhetsbrevstid\",\"enableNewsletter\":\"Aktivera Nyhetsbrev\",\"autoSubscribe\":\"Auto-registrera\"});\nTAPi18n._registerServerTranslator(\"sv\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"th\"])) {\n  TAPi18n.translations[\"th\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"th\"][namespace])) {\n  TAPi18n.translations[\"th\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"th\"][namespace], {});\nTAPi18n._registerServerTranslator(\"th\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"tr\"])) {\n  TAPi18n.translations[\"tr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"tr\"][namespace])) {\n  TAPi18n.translations[\"tr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"tr\"][namespace], {});\nTAPi18n._registerServerTranslator(\"tr\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"vi\"])) {\n  TAPi18n.translations[\"vi\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"vi\"][namespace])) {\n  TAPi18n.translations[\"vi\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"vi\"][namespace], {});\nTAPi18n._registerServerTranslator(\"vi\", namespace);\n","var _ = Package.underscore._,\n    package_name = \"telescope:newsletter\",\n    namespace = \"telescope:newsletter\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"])) {\n  TAPi18n.translations[\"zh-CN\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"][namespace])) {\n  TAPi18n.translations[\"zh-CN\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"zh-CN\"][namespace], {\"receive_the_best_of\":\"Receive the best of\",\"right_in_your_inbox\":\"right in your inbox.\",\"get_newsletter\":\"Get Newsletter\",\"thanks_for_subscribing\":\"Thanks for subscribing!\"});\nTAPi18n._registerServerTranslator(\"zh-CN\", namespace);\n"]}