)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/telescope_users/package-i18n.js","meteor://ðŸ’»app/lib/namespace.js","meteor://ðŸ’»app/lib/roles.js","meteor://ðŸ’»app/lib/config.js","meteor://ðŸ’»app/lib/permissions.js","meteor://ðŸ’»app/lib/users.js","meteor://ðŸ’»app/lib/avatars.js","meteor://ðŸ’»app/lib/callbacks.js","meteor://ðŸ’»app/lib/modules.js","meteor://ðŸ’»app/lib/helpers.js","meteor://ðŸ’»app/lib/menus.js","meteor://ðŸ’»app/lib/pubsub.js","meteor://ðŸ’»app/lib/methods.js","meteor://ðŸ’»app/lib/routes.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/account/template.user_account.js","meteor://ðŸ’»app/lib/client/templates/account/user_account.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/account/template.user_password.js","meteor://ðŸ’»app/lib/client/templates/account/user_password.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users-dashboard.js","meteor://ðŸ’»app/lib/client/templates/dashboard/users-dashboard.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_actions.js","meteor://ðŸ’»app/lib/client/templates/dashboard/users_list_actions.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_avatar.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_created_at.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_email.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_username.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/dashboard/template.users_list_display_name.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_comments.js","meteor://ðŸ’»app/lib/client/templates/profile/user_comments.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_downvoted_posts.js","meteor://ðŸ’»app/lib/client/templates/profile/user_downvoted_posts.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_info.js","meteor://ðŸ’»app/lib/client/templates/profile/user_info.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_posts.js","meteor://ðŸ’»app/lib/client/templates/profile/user_posts.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_upvoted_posts.js","meteor://ðŸ’»app/lib/client/templates/profile/user_upvoted_posts.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_profile_bio.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/profile/template.user_profile_twitter.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/template.sign_out.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/template.user_edit.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/template.user_complete.js","meteor://ðŸ’»app/lib/client/templates/user_complete.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/template.user_item.js","meteor://ðŸ’»app/lib/client/templates/user_item.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/template.user_profile.js","meteor://ðŸ’»app/lib/client/templates/user_profile.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/nav/template.user_menu.js","meteor://ðŸ’»app/lib/client/templates/nav/user_menu.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/nav/template.user_menu_label.js","meteor://ðŸ’»app/lib/client/templates/nav/user_menu_label.js","meteor://ðŸ’»app/packages/telescope_users/lib/client/templates/user_controller/template.user_controller.js","meteor://ðŸ’»app/lib/client/templates/user_controller/user_controller.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/ar.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/bg.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/cs.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/da.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/de.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/el.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/en.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/es.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/et.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/fr.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/hu.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/id.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/it.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/ja.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/kk.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/ko.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/nl.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/pl.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/pt-BR.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/ro.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/ru.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/sl.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/sv.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/th.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/tr.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/vi.i18n.js","meteor://ðŸ’»app/packages/telescope_users/packages/telescope_usersi18n/zh-CN.i18n.js"],"names":[],"mappings":"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,CAAC,IAAI,EAAE,CAAC;GACtB;AACD,gBAAc,EAAE,YAAY;;AAE1B,QAAI,MAAM,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;AAC1C,QAAI,cAAc,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,UAAU,SAAS,EAAE;AACjE,UAAI,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AAC9B,aAAO,CAAC,CAAC,KAAK,CAAC,QAAQ,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,SAAS,CAAC,CAAC;KACnF,CAAC,CAAC;AACH,WAAO,cAAc,CAAC;GACvB;CACF,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;ACvBH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;AC9GA,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC;AACzB,oBAAkB,EAAE,YAAU;AAC5B,WAAO,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,GAAG,GAAG,CAAC;GAChE;AACD,UAAQ,EAAE,YAAU;AAClB,WAAO,KAAK,CAAC,Q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U,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAC,gBAAgB,EAAE,QAAQ,EAAC,CAAC,CAAC;;AAEpE,WAAO,EAAC,IAAI,EAAE,QAAQ,IAAI,UAAU,EAAC,CAAC;GAEvC;CACF,CAAC,CAAC,qH;;;;;;;;;;;;;;;;;;ACfH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2H;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2H;;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H","file":"/packages/telescope_users.js","sourcesContent":["TAPi18n.packages[\"telescope:users\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n// define the package's templates registrar\nregisterI18nTemplate = TAPi18n._getRegisterHelpersProxy(\"telescope:users\");\nregisterTemplate = registerI18nTemplate; // XXX OBSOLETE, kept for backward compatibility will be removed in the future\n\n// Record the list of templates prior to package load\nvar _ = Package.underscore._;\nnon_package_templates = _.keys(Template);\n","/**\n * Telescope Users namespace\n * @namespace Users\n */\nUsers = Meteor.users;\n\nUsers.getUser = function (userOrUserId) {\n  if (typeof userOrUserId === \"undefined\") {\n    if (!Meteor.user()) {\n      throw new Error();\n    } else {\n      return Meteor.user();\n    }\n  } else if (typeof userOrUserId === \"string\") {\n    return Meteor.users.findOne(userOrUserId);\n  } else {\n    return userOrUserId;\n  }\n};\n","/**\n * Telescope roles\n * @namespace Users.is\n */\nUsers.is = {};\n\n/**\n * Check if a user is an admin\n * @param {Object|string} userOrUserId - The user or their userId\n */\nUsers.is.admin = function (userOrUserId) {\n  try {\n    var user = Users.getUser(userOrUserId);\n    return !!user && !!user.isAdmin;\n  } catch (e) {\n    return false; // user not logged in\n  }\n};\nUsers.is.adminById = Users.is.admin;\n\n/**\n * Check if a user owns a document\n * @param {Object|string} userOrUserId - The user or their userId\n * @param {Object} document - The document to check (post, comment, user object, etc.)\n */\nUsers.is.owner = function (userOrUserId, document) {\n  try {\n    var user = Users.getUser(userOrUserId);\n    if (!!document.userId) {\n      // case 1: document is a post or a comment, use userId to check\n      return user._id === document.userId;\n    } else {\n      // case 2: document is a user, use _id to check\n      return user._id === document._id;\n    }\n  } catch (e) {\n    return false; // user not logged in\n  }\n};\n\nUsers.is.ownerById = Users.is.owner;\n\nUsers.is.invited = function (userOrUserId) {\n  try {\n    var user = Users.getUser(userOrUserId);\n    return Users.is.admin(user) || user.telescope.isInvited;\n  } catch (e) {\n    return false; // user not logged in\n  }\n};\nUsers.is.invitedById = Users.is.invited;\n\nMeteor.users.helpers({\n  // conflicts with user.isAdmin property\n  // isAdmin: function () {\n  //   return Users.is.admin(this);\n  // },\n  isOwner: function (document) {\n    return Users.is.owner(this, document);\n  },\n  isInvited: function () {\n    return Users.is.invited(this);\n  }\n});","// //////////////////////////////////\n// // AccountsTemplates configuration\n// //////////////////////////////////\n\nAccountsTemplates.configure({\n  defaultLayout: 'layout',\n  defaultLayoutRegions: {},\n  defaultContentRegion: 'main',\n  enablePasswordChange: true,\n  showForgotPasswordLink: true,\n  confirmPassword: false,\n  overrideLoginErrors: true,\n  lowercaseUsername: true,\n\n  negativeFeedback: false,\n  positiveFeedback: false,\n  negativeValidation: true,\n  positiveValidation: true\n});\n\nAccountsTemplates.configureRoute('signIn', {\n    name: 'signIn',\n    path: '/sign-in',\n});\nAccountsTemplates.configureRoute('signUp', {\n    name: 'signUp',\n    path: '/register',\n});\nAccountsTemplates.configureRoute('changePwd');\nAccountsTemplates.configureRoute('forgotPwd');\nAccountsTemplates.configureRoute('resetPwd');\nAccountsTemplates.configureRoute('enrollAccount');\nAccountsTemplates.configureRoute('verifyEmail');\n\n// /* global\n//     AccountsTemplates: false,\n//     Settings: false\n// */\n\n\nif (Meteor.isServer) {\n  Meteor.startup(function () {\n    Accounts.emailTemplates.siteName = Settings.get('title');\n    Accounts.emailTemplates.from = Settings.get('defaultEmail');\n  });\n}\n\n//Fields\nAccountsTemplates.addField({\n    _id: 'username',\n    type: 'text',\n    displayName: 'username',\n    required: true,\n    minLength: 3,\n    errStr: 'error.minChar'\n});\n\nAccountsTemplates.removeField('email');\nAccountsTemplates.addField({\n    _id: 'email',\n    type: 'email',\n    required: true,\n    re: /.+@(.+){2,}\\.(.+){2,}/,\n    errStr: 'error.accounts.Invalid email',\n});\n\nAccountsTemplates.removeField('password');\nAccountsTemplates.addField({\n    _id: 'password',\n    type: 'password',\n    required: true,\n    minLength: 8,\n    errStr: 'error.minChar'\n});\n\nAccountsTemplates.addField({\n    _id: 'username_and_email',\n    type: 'text',\n    required: true,\n    displayName: 'usernameOrEmail',\n    placeholder: 'usernameOrEmail',\n});\n\n// hack to get signOut route not considered among previous paths\nif (Meteor.isClient) {\n  Meteor.startup(function(){\n      AccountsTemplates.knownRoutes.push('/sign-out');\n  });\n}\n","// note: using collection helpers here is probably a bad idea, \n// because they'll throw an error when the user is undefined\n\n/**\n * Telescope permissions\n * @namespace Users.can\n */\nUsers.can = {};\n\n/**\n * Permissions checks.  Return true if all is well.\n * @param {Object} user - Meteor.user()\n */\nUsers.can.view = function (user) {\n  if (Settings.get('requireViewInvite', false)) {\n\n    if (Meteor.isClient) {\n      // on client only, default to the current user\n      user = (typeof user === 'undefined') ? Meteor.user() : user;\n    }\n\n    return (!!user && (Users.is.admin(user) || Users.is.invited(user)));\n  }\n  return true;\n};\nUsers.helpers({canView: function () {return Users.can.view(this);}});\n\n\nUsers.can.viewById = function (userId) {\n  // if an invite is required to view, run permission check, else return true\n  if (Settings.get('requireViewInvite', false)) {\n    return !!userId ? Users.can.view(Meteor.users.findOne(userId)) : false;\n  }\n  return true;\n};\nUsers.helpers({canViewById: function () {return Users.can.viewById(this);}});\n\nUsers.can.viewPendingPosts = function (user) {\n  user = (typeof user === 'undefined') ? Meteor.user() : user;\n  return Users.is.admin(user);\n};\n\nUsers.can.viewPendingPost = function (user, post) {\n  return Users.is.owner(user, post) || Users.can.viewPendingPosts(user);\n};\n\nUsers.can.viewRejectedPosts = function (user) {\n  user = (typeof user === 'undefined') ? Meteor.user() : user;\n  return Users.is.admin(user);\n};\n\nUsers.can.viewRejectedPost = function (user, post) {\n  return Users.is.owner(user, post) || Users.can.viewRejectedPosts(user);\n};\n\nUsers.can.post = function (user, returnError) {\n  user = (typeof user === 'undefined') ? Meteor.user() : user;\n\n  if (!user) {\n    return returnError ? \"no_account\" : false;\n  } else if (Users.is.admin(user)) {\n    return true;\n  } else if (Settings.get('requirePostInvite')) {\n    if (user.telescope.isInvited) {\n      return true;\n    } else {\n      return false;\n    }\n  } else {\n    return true;\n  }\n};\nUsers.helpers({canPost: function () {return Users.can.post(this);}});\n\nUsers.can.comment = function (user, returnError) {\n  return Users.can.post(user, returnError);\n};\nUsers.helpers({canComment: function () {return Users.can.comment(this);}});\n\nUsers.can.vote = function (user, returnError) {\n  return Users.can.post(user, returnError);\n};\nUsers.helpers({canVote: function () {return Users.can.vote(this);}});\n\n/**\n * Check if a user can edit a document\n * @param {Object} user - The user performing the action\n * @param {Object} document - The document being edited\n */\nUsers.can.edit = function (user, document) {\n  user = (typeof user === 'undefined') ? Meteor.user() : user;\n\n  if (!user || !document) {\n    return false;\n  }\n\n  var adminCheck = Users.is.admin(user);\n  var ownerCheck = Users.is.owner(user, document);\n\n  return adminCheck || ownerCheck;\n};\nUsers.helpers({canEdit: function (document) {return Users.can.edit(this, document);}});\n\nUsers.can.editById = function (userId, document) {\n  var user = Meteor.users.findOne(userId);\n  return Users.can.edit(user, document);\n};\nUsers.helpers({canEditById: function (document) {return Users.can.editById(this, document);}});\n\n/**\n * Check if a user can submit a field\n * @param {Object} user - The user performing the action\n * @param {Object} field - The field being edited or inserted\n */\nUsers.can.submitField = function (user, field) {\n\n  if (!field.editableBy || !user) {\n    return false;\n  }\n\n  var adminCheck = _.contains(field.editableBy, \"admin\") && Users.is.admin(user); // is the field editable by admins?\n  var memberCheck = _.contains(field.editableBy, \"member\"); // is the field editable by regular users?\n\n  return adminCheck || memberCheck;\n\n};\nUsers.helpers({canSubmitField: function (field) {return Users.can.submitField(this, field);}});\n\n/** @function\n * Check if a user can edit a field â€“ for now, identical to Users.can.submitField\n * @param {Object} user - The user performing the action\n * @param {Object} field - The field being edited or inserted\n */\nUsers.can.editField = Users.can.submitField;\n\nUsers.can.invite = function (user) {\n  return Users.is.invited(user) || Users.is.admin(user);\n};\nUsers.helpers({canInvite: function () {return Users.can.invite(this);}});\n\n","/**\n * Vote schema\n * @type {SimpleSchema}\n */\nTelescope.schemas.votes = new SimpleSchema({\n  itemId: {\n    type: String\n  },\n  power: {\n    type: Number,\n    optional: true\n  },\n  votedAt: {\n    type: Date, \n    optional: true\n  }\n});\n\n/**\n * User Data schema\n * @type {SimpleSchema}\n */\nTelescope.schemas.userData = new SimpleSchema({\n  /**\n    Bio (Markdown version)\n  */\n  bio: {\n    type: String,\n    optional: true,\n    editableBy: [\"member\", \"admin\"],\n    autoform: {\n      rows: 5\n    }\n  },\n  /**\n    Total comment count\n  */\n  commentCount: {\n    type: Number,\n    public: true,\n    optional: true\n  },\n  /**\n    The name displayed throughout the app. Can contain spaces and special characters, doesn't need to be unique\n  */\n  displayName: {\n    type: String,\n    optional: true,\n    public: true,\n    profile: true,\n    editableBy: [\"member\", \"admin\"]\n  },\n  /**\n    An array containing comment downvotes\n  */\n  downvotedComments: {\n    type: [Telescope.schemas.votes],\n    public: true,\n    optional: true\n  },\n  /**\n    An array containing posts downvotes\n  */\n  downvotedPosts: {\n    type: [Telescope.schemas.votes],\n    public: true,\n    optional: true\n  },\n  /**\n    The user's email. Modifiable.\n  */\n  email: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Email,\n    required: true,\n    editableBy: [\"member\", \"admin\"]\n    // unique: true // note: find a way to fix duplicate accounts before enabling this\n  },\n  /**\n    A hash of the email, used for Gravatar // TODO: change this when email changes\n  */\n  emailHash: {\n    type: String,\n    public: true,\n    optional: true\n  },\n  /**\n    The HTML version of the bio field\n  */\n  htmlBio: {\n    type: String,\n    public: true,\n    profile: true,\n    optional: true,\n    autoform: {\n      omit: true\n    },\n    template: \"user_profile_bio\"\n  },\n  /**\n    The user's karma\n  */\n  karma: {\n    type: Number,\n    decimal: true,\n    public: true,\n    optional: true\n  },\n  /**\n    Total post count\n  */\n  postCount: {\n    type: Number,\n    public: true,\n    optional: true\n  },\n  /**\n    A blackbox modifiable object to store the user's settings\n  */\n  settings: {\n    type: Object,\n    optional: true,\n    editableBy: [\"member\", \"admin\"],\n    blackbox: true,\n    autoform: {\n      omit: true\n    }\n  },\n  /**\n    The user's profile URL slug // TODO: change this when displayName changes\n  */\n  slug: {\n    type: String,\n    public: true,\n    optional: true\n  },\n  /**\n    The user's Twitter username\n  */\n  twitterUsername: {\n    type: String,\n    optional: true,\n    public: true,\n    profile: true,\n    editableBy: [\"member\", \"admin\"],\n    template: \"user_profile_twitter\"\n  },\n  /**\n    An array containing comments upvotes\n  */\n  upvotedComments: {\n    type: [Telescope.schemas.votes],\n    public: true,\n    optional: true\n  },\n  /**\n    An array containing posts upvotes\n  */\n  upvotedPosts: {\n    type: [Telescope.schemas.votes],\n    public: true,\n    optional: true\n  },\n  /**\n    A link to the user's homepage\n  */\n  website: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n    public: true,\n    profile: true,\n    optional: true,\n    editableBy: [\"member\", \"admin\"]\n  }\n});\n\n/**\n * Users schema\n * @type {SimpleSchema}\n */\nUsers.schema = new SimpleSchema({ \n  _id: {\n    type: String,\n    public: true,\n    optional: true\n  },\n  username: {\n    type: String,\n    // regEx: /^[a-z0-9A-Z_]{3,15}$/,\n    public: true,\n    optional: true\n  },\n  emails: {\n    type: [Object],\n    optional: true\n  },\n  \"emails.$.address\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n    optional: true\n  },\n  \"emails.$.verified\": {\n    type: Boolean,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    public: true,\n    optional: true\n  },\n  isAdmin: {\n    type: Boolean,\n    optional: true,\n    editableBy: [\"admin\"],\n    autoform: {\n      omit: true\n    }\n  },\n  profile: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  telescope: { // telescope-specific data\n    type: Telescope.schemas.userData,\n    optional: true\n  },\n  services: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  }\n});\n\nMeteor.startup(function(){\n  Users.internationalize();\n});\n\n/**\n * Attach schema to Meteor.users collection\n */\nUsers.attachSchema(Users.schema);\n\n/**\n * Users collection permissions\n */\n\nUsers.allow({\n  update: _.partial(Telescope.allowCheck, Meteor.users),\n  remove: _.partial(Telescope.allowCheck, Meteor.users)\n});\n\n","Avatar.setOptions({\n  fallbackType: 'initials',\n  emailHashProperty: 'telescope.emailHash'\n});\n","//////////////////////////////////////////////////////\n// Collection Hooks                                 //\n//////////////////////////////////////////////////////\n\n/**\n * Generate HTML body from Markdown on user bio insert\n */\nUsers.after.insert(function (userId, user) {\n\n  // run create user async callbacks\n  Telescope.callbacks.runAsync(\"onCreateUserAsync\", user);\n\n  // check if all required fields have been filled in. If so, run profile completion callbacks\n  if (Users.hasCompletedProfile(user)) {\n    Telescope.callbacks.runAsync(\"profileCompletedAsync\", user);\n  }\n\n});\n\n/**\n * Generate HTML body from Markdown when user bio is updated\n */\nUsers.before.update(function (userId, doc, fieldNames, modifier) {\n  // if bio is being modified, update htmlBio too\n  if (Meteor.isServer && modifier.$set && modifier.$set[\"telescope.bio\"]) {\n    modifier.$set[\"telescope.htmlBio\"] = Telescope.utils.sanitize(marked(modifier.$set[\"telescope.bio\"]));\n  }\n});\n\n/**\n * Disallow $rename\n */\nUsers.before.update(function (userId, doc, fieldNames, modifier) {\n  if (!!modifier.$rename) {\n    throw new Meteor.Error(\"illegal $rename operator detected!\");\n  }\n});\n\n/**\n * If user.telescope.email has changed, check for existing emails and change user.emails and email hash if needed\n */\n if (Meteor.isServer) {\n  Users.before.update(function (userId, doc, fieldNames, modifier) {\n\n    var user = doc;\n\n    // if email is being modified, update user.emails too\n    if (Meteor.isServer && modifier.$set && modifier.$set[\"telescope.email\"]) {\n\n      var newEmail = modifier.$set[\"telescope.email\"];\n\n      // check for existing emails and throw error if necessary\n      var userWithSameEmail = Users.findByEmail(newEmail);\n      if (userWithSameEmail && userWithSameEmail._id !== doc._id) {\n        throw new Meteor.Error(\"email_taken2\", i18n.t(\"this_email_is_already_taken\") + \" (\" + newEmail + \")\");\n      }\n\n      // if user.emails exists, change it too\n      if (!!user.emails) {\n        user.emails[0].address = newEmail;\n        modifier.$set.emails = user.emails;\n      }\n\n      // update email hash\n      modifier.$set[\"telescope.emailHash\"] = Gravatar.hash(newEmail);\n\n    }\n  });\n}\n\n//////////////////////////////////////////////////////\n// Callbacks                                        //\n//////////////////////////////////////////////////////\n\n/**\n * Set up user object on creation\n * @param {Object} user â€“ the user object being iterated on and returned\n * @param {Object} options â€“ user options\n */\nfunction setupUser (user, options) {\n  // ------------------------------ Properties ------------------------------ //\n  var userProperties = {\n    profile: options.profile || {},\n    telescope: {\n      karma: 0,\n      isInvited: false,\n      postCount: 0,\n      commentCount: 0,\n      invitedCount: 0,\n      upvotedPosts: [],\n      downvotedPosts: [],\n      upvotedComments: [],\n      downvotedComments: []\n    }\n  };\n  user = _.extend(user, userProperties);\n\n  // look in a few places for the user email\n  if (options.email) {\n    user.telescope.email = options.email;\n  } else if (user.services.facebook && user.services.facebook.email) {\n    user.telescope.email = user.services.facebook.email;\n  }\n\n  // generate email hash\n  if (!!user.telescope.email) {\n    user.telescope.emailHash = Gravatar.hash(user.telescope.email);\n  }\n\n  // look in a few places for the displayName\n  if (user.profile.username) {\n    user.telescope.displayName = user.profile.username;\n  } else if (user.profile.name) {\n    user.telescope.displayName = user.profile.name;\n  } else {\n    user.telescope.displayName = user.username;\n  }\n\n  // create slug from display name\n  user.telescope.slug = Telescope.utils.slugify(user.telescope.displayName);\n\n  // if this is not a dummy account, and is the first user ever, make them an admin\n  user.isAdmin = (!user.profile.isDummy && Meteor.users.find({'profile.isDummy': {$ne: true}}).count() === 0) ? true : false;\n\n  Events.track('new user', {username: user.username, email: user.telescope.email});\n\n  return user;\n}\nTelescope.callbacks.add(\"onCreateUser\", setupUser);\n\n\nfunction hasCompletedProfile (user) {\n  return Users.hasCompletedProfile(user);\n}\nTelescope.callbacks.add(\"profileCompletedChecks\", hasCompletedProfile);\n","\nTelescope.modules.add(\"profileDisplay\", [\n  {\n    template: 'user_info',\n    order: 1\n  },\n  {\n    template: 'user_posts',\n    order: 2\n  },\n  {\n    template: 'user_upvoted_posts',\n    order: 3\n  },\n  {\n    template: 'user_downvoted_posts',\n    order: 5\n  },\n  {\n    template: 'user_comments',\n    order: 5\n  }\n]);\n\nTelescope.modules.add(\"profileEdit\", [\n  {\n    template: 'user_account',\n    order: 1\n  }\n]);","////////////////////\n//  User Getters  //\n////////////////////\n\n/**\n * Get a user's username (unique, no special characters or spaces)\n * @param {Object} user\n */\nUsers.getUserName = function (user) {\n  try{\n    if (user.username)\n      return user.username;\n    if (user && user.services && user.services.twitter && user.services.twitter.screenName)\n      return user.services.twitter.screenName;\n  }\n  catch (error){\n    console.log(error);\n    return null;\n  }\n};\nUsers.helpers({getUserName: function () {return Users.getUserName(this);}});\nUsers.getUserNameById = function (userId) {return Users.getUserName(Meteor.users.findOne(userId))};\n\n/**\n * Get a user's display name (not unique, can take special characters and spaces)\n * @param {Object} user\n */\nUsers.getDisplayName = function (user) {\n  if (typeof user === \"undefined\") {\n    return \"\";\n  } else {\n    return (user.telescope && user.telescope.displayName) ? user.telescope.displayName : Users.getUserName(user);\n  }\n};\nUsers.helpers({getDisplayName: function () {return Users.getDisplayName(this);}});\nUsers.getDisplayNameById = function (userId) {return Users.getDisplayName(Meteor.users.findOne(userId));};\n\n/**\n * Get a user's profile URL\n * @param {Object} user (note: we only actually need either the _id or slug properties)\n * @param {Boolean} isAbsolute\n */\nUsers.getProfileUrl = function (user, isAbsolute) {\n  if (typeof user === \"undefined\") {\n    return \"\";\n  }\n  var isAbsolute = typeof isAbsolute === \"undefined\" ? false : isAbsolute; // default to false\n  var prefix = isAbsolute ? Telescope.utils.getSiteUrl().slice(0,-1) : \"\";\n  return prefix + FlowRouter.path(\"userProfile\", {_idOrSlug: user.telescope && user.telescope.slug || user._id});\n};\nUsers.helpers({getProfileUrl: function (isAbsolute) {return Users.getProfileUrl(this, isAbsolute);}});\n\n/**\n * Get a user's Twitter name\n * @param {Object} user\n */\nUsers.getTwitterName = function (user) {\n  // return twitter name provided by user, or else the one used for twitter login\n  if (typeof user !== \"undefined\") {\n    if (Telescope.utils.checkNested(user, 'profile', 'twitter')) {\n      return user.profile.twitter;\n    } else if(Telescope.utils.checkNested(user, 'services', 'twitter', 'screenName')) {\n      return user.services.twitter.screenName;\n    }\n  }\n  return null;\n};\nUsers.helpers({getTwitterName: function () {return Users.getTwitterName(this);}});\nUsers.getTwitterNameById = function (userId) {return Users.getTwitterName(Meteor.users.findOne(userId));};\n\n/**\n * Get a user's GitHub name\n * @param {Object} user\n */\nUsers.getGitHubName = function (user) {\n  // return twitter name provided by user, or else the one used for twitter login\n  if(Telescope.utils.checkNested(user, 'profile', 'github')){\n    return user.profile.github;\n  }else if(Telescope.utils.checkNested(user, 'services', 'github', 'screenName')){ // TODO: double-check this with GitHub login\n    return user.services.github.screenName;\n  }\n  return null;\n};\nUsers.helpers({getGitHubName: function () {return Users.getGitHubName(this);}});\nUsers.getGitHubNameById = function (userId) {return Users.getGitHubName(Meteor.users.findOne(userId));};\n\n/**\n * Get a user's email\n * @param {Object} user\n */\nUsers.getEmail = function (user) {\n  if(user.telescope && user.telescope.email){\n    return user.telescope.email;\n  }else{\n    return null;\n  }\n};\nUsers.helpers({getEmail: function () {return Users.getEmail(this);}});\nUsers.getEmailById = function (userId) {return Users.getEmail(Meteor.users.findOne(userId));};\n\n/**\n * Get a user's email hash\n * @param {Object} user\n */\nUsers.getEmailHash = function (user) {\n  // has to be this way to work with Gravatar\n  return Gravatar.hash(Users.getEmail(user));\n};\nUsers.helpers({getEmailHash: function () {return Users.getEmailHash(this);}});\nUsers.getEmailHashById = function (userId) {return Users.getEmailHash(Meteor.users.findOne(userId));};\n\n/**\n * Check if a user's profile is complete\n * @param {Object} user\n */\nUsers.userProfileComplete = function (user) {\n  for (var i = 0; i < Telescope.callbacks.profileCompletedChecks.length; i++) {\n    if (!Telescope.callbacks.profileCompletedChecks[i](user)) {\n      return false;\n    }\n  }\n  return true;\n};\nUsers.helpers({userProfileComplete: function () {return Users.userProfileComplete(this);}});\nUsers.userProfileCompleteById = function (userId) {return Users.userProfileComplete(Meteor.users.findOne(userId));};\n\n/**\n * Get a user setting\n * @param {Object} user\n * @param {String} settingName\n * @param {Object} defaultValue\n */\nUsers.getSetting = function (user, settingName, defaultValue) {\n  user = user || Meteor.user();\n  defaultValue = defaultValue || null;\n\n  // all settings should be in the user.telescope namespace, so add \"telescope.\" if needed\n  settingName = settingName.slice(0,10) === \"telescope.\" ? settingName : \"telescope.\" + settingName;\n\n  if (user.telescope) {\n    var settingValue = this.getProperty(user, settingName);\n    return (settingValue === null) ? defaultValue : settingValue;\n  } else {\n    return defaultValue;\n  }\n};\nUsers.helpers({getSetting: function (settingName, defaultValue) {return Users.getSetting(this, settingName, defaultValue);}});\n\n/**\n * Set a user setting\n * @param {Object} user\n * @param {String} settingName\n * @param {Object} defaultValue\n */\nUsers.setSetting = function (user, settingName, value) {\n  if (user) {\n\n    // all settings should be in the user.telescope namespace, so add \"telescope.\" if needed\n    var field = settingName.slice(0,10) === \"telescope.\" ? settingName : \"telescope.\" + settingName;\n\n    var modifier = {$set: {}};\n    modifier.$set[field] = value;\n    Users.update(user._id, modifier);\n\n  }\n};\nUsers.helpers({setSetting: function () {return Users.setSetting(this);}});\n\n/**\n * Check if a user has upvoted a post\n * @param {Object} user\n * @param {Object} post\n */\nUsers.hasUpvoted = function (user, post) {\n  return user && _.include(post.upvoters, user._id);\n};\nUsers.helpers({hasUpvoted: function (post) {return Users.hasUpvoted(this, post);}});\n\n/**\n * Check if a user has downvoted a post\n * @param {Object} user\n * @param {Object} post\n */\nUsers.hasDownvoted = function (user, post) {\n  return user && _.include(post.downvoters, user._id);\n};\nUsers.helpers({hasDownvoted: function (post) {return Users.hasDownvoted(this, post);}});\n\n///////////////////\n// Other Helpers //\n///////////////////\n\nUsers.findLast = function (user, collection) {\n  return collection.findOne({userId: user._id}, {sort: {createdAt: -1}});\n};\n\nUsers.timeSinceLast = function (user, collection){\n  var now = new Date().getTime();\n  var last = this.findLast(user, collection);\n  if(!last)\n    return 999; // if this is the user's first post or comment ever, stop here\n  return Math.abs(Math.floor((now-last.createdAt)/1000));\n};\n\nUsers.numberOfItemsInPast24Hours = function (user, collection) {\n  var mNow = moment();\n  var items = collection.find({\n    userId: user._id,\n    createdAt: {\n      $gte: mNow.subtract(24, 'hours').toDate()\n    }\n  });\n  return items.count();\n};\n\nUsers.getProperty = function (object, property) {\n  // recursive function to get nested properties\n  var array = property.split('.');\n  if(array.length > 1){\n    var parent = array.shift();\n    // if our property is not at this level, call function again one level deeper if we can go deeper, else return null\n    return (typeof object[parent] === \"undefined\") ? null : this.getProperty(object[parent], array.join('.'));\n  }else{\n    // else return property\n    return object[array[0]];\n  }\n};\n\nUsers.updateAdmin = function (userId, admin) {\n  Users.update(userId, {$set: {isAdmin: admin}});\n};\n\nUsers.adminUsers = function (options) {\n  return this.find({isAdmin : true}, options).fetch();\n};\n\nUsers.getCurrentUserEmail = function () {\n  return Meteor.user() ? Users.getEmail(Meteor.user()) : '';\n};\n\nUsers.findByEmail = function (email) {\n  return Meteor.users.findOne({\"telescope.email\": email});\n};\n\n\n/**\n * @method Users.getRequiredFields\n * Get a list of all fields required for a profile to be complete.\n */\nUsers.getRequiredFields = function () {\n  var schema = Users.simpleSchema()._schema;\n  var fields = _.filter(_.keys(schema), function (fieldName) {\n    var field = schema[fieldName];\n    return !!field.required;\n  });\n  return fields;\n};\n\n/**\n * Check if the user has completed their profile.\n * @param {Object} user\n */\nUsers.hasCompletedProfile = function (user) {\n  return _.every(Users.getRequiredFields(), function (fieldName) {\n    return !!Telescope.getNestedProperty(user, fieldName);\n  });\n};\nUsers.helpers({hasCompletedProfile: function () {return Users.hasCompletedProfile(this);}});\nUsers.hasCompletedProfileById = function (userId) {return Users.hasCompletedProfile(Meteor.users.findOne(userId));};\n","Telescope.modules.add(\"secondaryNav\", [\n  {\n    template: 'user_menu',\n    order: 10\n  }\n]);\n\nTelescope.modules.add(\"mobileNav\", [\n  {\n    template: 'user_menu',\n    order: 20\n  }\n]);\n\nvar userMenuItems = [\n  {\n    route: function () {\n      var user = Meteor.user();\n      return FlowRouter.path('userProfile', {_idOrSlug: user && user.telescope && user.telescope.slug});\n    },\n    label: 'profile'\n    // description: 'view_your_profile'\n  },\n  {\n    route: function () {\n      var user = Meteor.user();\n      return FlowRouter.path('userEdit', {_idOrSlug: user && user.telescope && user.telescope.slug});\n    },\n    label: 'edit_account'\n    // description: 'edit_your_profile'\n  },\n  {\n    route: 'adminSettings',\n    label: 'settings',\n    // description: 'settings',\n    adminOnly: true\n  },\n  {\n    route: 'signOut',\n    label: 'sign_out'\n    // description: 'sign_out'\n  }\n];\n\nTelescope.menuItems.add(\"userMenu\", Telescope.menuItems.internationalize(userMenuItems));\n\n// array containing items in the admin menu\nTelescope.menuItems.add(\"adminMenu\", [\n  {\n    route: 'adminUsers',\n    label: \"users\",\n    description: \"users_dashboard\"\n  }\n]);","////////////////////////////////////\n// Publications and Subscriptions //\n////////////////////////////////////\n\n/**\n * Users pub/sub configs and methods\n * @namespace Users.pubsub\n */\nUsers.pubsub = {};\n\n/**\n * Default user object fields in publication\n * @type {Object}\n */\n\nvar publicFields = Users.simpleSchema().getPublicFields();\n\n// add public fields as specified in schema\nUsers.pubsub.publicProperties = _.object(publicFields, _.map(publicFields, function () {return true}));\n\n// add a few more fields\nUsers.pubsub.publicProperties = _.extend(Users.pubsub.publicProperties, {\n  'services.twitter.profile_image_url': true,\n  'services.twitter.profile_image_url_https': true,\n  'services.facebook.id': true,\n  'services.twitter.screenName': true,\n});\n\n/**\n * Options for your own user account (for security reasons, block certain properties)\n * @type {Object}\n */\nUsers.pubsub.hiddenProperties = {\n  'services.password.bcrypt': false\n};\n\n/**\n * Minimum required properties to display avatars and display names\n * @type {Object}\n */\nUsers.pubsub.avatarProperties = {\n  _id: true,\n  'telescope.emailHash': true,\n  'telescope.slug': true,\n  'telescope.displayName': true,\n  username: true,\n  'profile.username': true,\n  'profile.github': true,\n  'profile.twitter': true,\n  'services.twitter.profile_image_url': true,\n  'services.twitter.profile_image_url_https': true,\n  'services.facebook.id': true,\n  'services.twitter.screenName': true,\n  'services.github.screenName': true, // Github is not really used, but there are some mentions to it in the code\n};\n\n// note: to work around nested fields subscription bug, we'll publish\n// all public user properties at all times for now\n// see https://github.com/meteor/meteor/issues/998\n\nUsers.pubsub.avatarProperties = Users.pubsub.publicProperties;\n\n/**\n * Build Users subscription with filter, sort, and limit args.\n * @param {String} filterBy\n * @param {String} sortBy\n * @param {Number} limit\n */\nUsers.pubsub.getSubParams = function(filterBy, sortBy, limit) {\n  var find = {},\n      sort = {createdAt: -1};\n\n  switch(filterBy){\n    case 'invited':\n      // consider admins as invited\n      find = { $or: [{ isInvited: true }, { isAdmin: true }]};\n      break;\n    case 'uninvited':\n      find = { $and: [{ isInvited: false }, { isAdmin: false }]};\n      break;\n    case 'admin':\n      find = { isAdmin: true };\n      break;\n  }\n\n  switch(sortBy){\n    case 'username':\n      sort = { username: 1 };\n      break;\n    case 'karma':\n      sort = { karma: -1 };\n      break;\n    case 'postCount':\n      sort = { postCount: -1 };\n      break;\n    case 'commentCount':\n      sort = { commentCount: -1 };\n      break;\n    case 'invitedCount':\n      sort = { invitedCount: -1 };\n  }\n  return {\n    find: find,\n    options: { sort: sort, limit: limit }\n  };\n};\n","var completeUserProfile = function (modifier, userId, user) {\n\n  Users.update(userId, modifier);\n\n  Telescope.callbacks.runAsync(\"profileCompletedAsync\", Users.findOne(userId));\n\n  return Users.findOne(userId);\n\n};\n\nMeteor.methods({\n  completeUserProfile: function (modifier, userId) {\n    \n    check(modifier, Match.OneOf({$set: Object}, {$unset: Object}, {$set: Object, $unset: Object}));\n    check(userId, String);\n\n    var currentUser = Meteor.user(),\n        user = Users.findOne(userId),\n        schema = Users.simpleSchema()._schema;\n\n    // ------------------------------ Checks ------------------------------ //\n\n    // check that user can edit document\n    if (!user || !Users.can.edit(currentUser, user)) {\n      throw new Meteor.Error(601, i18n.t('sorry_you_cannot_edit_this_user'));\n    }\n\n    // if an $unset modifier is present, it means one or more of the fields is missing\n    if (modifier.$unset) {\n      throw new Meteor.Error(601, i18n.t('all_fields_are_required'));\n    }\n\n    // check for existing emails and throw error if necessary\n    // NOTE: redundant with collection hook, but better to throw the error here to avoid wiping out the form\n    if (modifier.$set && modifier.$set[\"telescope.email\"]) {\n      var email = modifier.$set[\"telescope.email\"];\n      if (Users.findByEmail(email)) {\n        throw new Meteor.Error(\"email_taken1\", i18n.t(\"this_email_is_already_taken\") + \" (\" + email + \")\");\n      }\n\n    }\n\n    // go over each field and throw an error if it's not editable\n    // loop over each operation ($set, $unset, etc.)\n    _.each(modifier, function (operation) {\n      // loop over each property being operated on\n      _.keys(operation).forEach(function (fieldName) {\n        var field = schema[fieldName];\n        if (!Users.can.editField(user, field, user)) {\n          throw new Meteor.Error(\"disallowed_property\", i18n.t('disallowed_property_detected') + \": \" + fieldName);\n        }\n\n      });\n    });\n\n    completeUserProfile(modifier, userId, user);\n  },\n\n  removeUser: function (userId, removePosts) {\n\n    if (Users.is.adminById(this.userId)) {\n\n      removePosts = (typeof removePosts === \"undefined\") ? false : removePosts;\n\n      Meteor.users.remove(userId);\n\n      if (removePosts) {\n        var deletedPosts = Posts.remove({userId: userId});\n        var deletedComments = Comments.remove({userId: userId});\n        return \"Deleted \"+deletedPosts+\" posts and \"+deletedComments+\" comments\";\n      } else {\n        // not sure if anything should be done in that scenario yet\n        // Posts.update({userId: userId}, {$set: {author: \"\\[deleted\\]\"}}, {multi: true});\n        // Comments.update({userId: userId}, {$set: {author: \"\\[deleted\\]\"}}, {multi: true});\n      }\n    \n    }\n\n  }\n\n});\n","Telescope.adminRoutes.route('/users', {\n  name: \"adminUsers\",\n  action: function(params, queryParams) {\n    BlazeLayout.render(\"layout\", {main: \"admin_wrapper\", admin: \"users_dashboard\"});\n  }\n});\n\nFlowRouter.route('/users/:_idOrSlug', {\n  name: \"userProfile\",\n  action: function(params, queryParams) {\n    BlazeLayout.render(\"layout\", {main: \"user_controller\", userTemplate: \"user_profile\"});\n  }\n});\n\nFlowRouter.route('/users/:_idOrSlug/edit', {\n  name: \"userEdit\",\n  action: function(params, queryParams) {\n    BlazeLayout.render(\"layout\", {main: \"user_controller\", userTemplate: \"user_edit\"});\n  }\n});\n\nFlowRouter.route('/account', {\n  name: \"userAccountShortcut\",\n  triggersEnter: [function(context, redirect) {\n    redirect(\"userEdit\", {_idOrSlug: Meteor.userId()});\n  }]\n});\n\nFlowRouter.route('/sign-out', {\n  name: \"signOut\",\n  triggersEnter: [function(context, redirect) {\n    AccountsTemplates.logout();\n    Messages.flash(i18n.t(\"you_have_been_logged_out\"));\n  }]\n});","\nTemplate.__checkName(\"user_account\");\nTemplate[\"user_account\"] = new Template(\"Template.user_account\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"grid-small grid-module dialog user-edit\"\n  }, \"\\n\\n  \", Blaze._TemplateWith(function() {\n    return {\n      collection: Spacebars.call(\"Meteor.users\"),\n      doc: Spacebars.call(view.lookup(\"user\")),\n      id: Spacebars.call(\"editUserForm\"),\n      template: Spacebars.call(\"bootstrap3-horizontal\"),\n      \"input-col-class\": Spacebars.call(\"controls\"),\n      type: Spacebars.call(\"update\"),\n      fields: Spacebars.call(view.lookup(\"userFields\"))\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"quickForm\"));\n  }), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isUsingPassword\"));\n  }, function() {\n    return [ \"\\n    \", HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"atChangePwd\");\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"change_password\");\n    })), \"\\n  \" ];\n  }), \"\\n  \");\n}));\n","Template.user_account.helpers({\n  user: function  () {\n    return this;\n  },\n  userFields: function () {\n    var fields = Meteor.users.simpleSchema().getEditableFields(Meteor.user());\n    return fields;\n  },\n  isUsingPassword: function  () {\n    return this.services && !!this.services.password;\n  }\n});\n\n\nAutoForm.hooks({\n  editUserForm: {\n\n    onSuccess: function(operation, result) {\n      this.template.$('button[type=submit]').removeClass('loading');\n      Messages.flash(i18n.t(\"user_profile_saved\"), 'success');\n      Messages.clearSeen();\n    },\n\n    onError: function(operation, error) {\n      this.template.$('button[type=submit]').removeClass('loading');\n      Messages.flash(error.message.split('|')[0], 'error'); // workaround because error.details returns undefined\n      Messages.clearSeen();\n    }\n\n  }\n});\n","\nTemplate.__checkName(\"user_password\");\nTemplate[\"user_password\"] = new Template(\"Template.user_password\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isUsingPassword\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"grid-small grid-module dialog user-password\"\n    }, \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        state: Spacebars.call(\"changePwd\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"atForm\"));\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n","Template.user_password.helpers({\n  isUsingPassword: function  () {\n    return !!this.services.password\n  }\n});","\nTemplate.__checkName(\"users_dashboard\");\nTemplate[\"users_dashboard\"] = new Template(\"Template.users_dashboard\", (function() {\n  var view = this;\n  return [ HTML.Raw('<h2 class=\"users-dashboard-heading\">All Users</h2>\\n  '), HTML.DIV({\n    \"class\": \"users-dashboard\"\n  }, \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      settings: Spacebars.call(view.lookup(\"settings\"))\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"reactiveTable\"));\n  }), \"\\n  \") ];\n}));\n","Template.users_dashboard.helpers({\n  settings: function() {\n    return {\n      collection: 'all-users',\n      rowsPerPage: 20,\n      showFilter: true,\n      fields: [\n        { key: 'avatar', label: '', tmpl: Template.users_list_avatar, sortable: false },\n        { key: 'createdAt', label: 'Member Since', tmpl: Template.users_list_created_at, sort: 'descending' },\n        { key: 'isAdmin', label: 'Admin', fn: function(val){return val ? 'Yes':'No'} },\n        { key: 'username', label: 'Username', tmpl: Template.users_list_username },\n        { key: 'telescope.displayName', label: 'Display Name', tmpl: Template.users_list_display_name },\n        { key: 'telescope.email', label: 'Email', tmpl: Template.users_list_email },\n        { key: 'telescope.postCount', label: 'Posts' },\n        { key: 'telescope.commentCount', label: 'Comments' },\n        { key: 'telescope.karma', label: 'Karma', fn: function(val){return Math.round(100*val)/100} },\n        { key: 'telescope.inviteCount', label: 'Invites' },\n        { key: 'telescope.isInvited', label: 'Invited', fn: function(val){return val ? 'Yes':'No'} },\n        { key: 'actions', label: 'Actions', tmpl: Template.users_list_actions, sortable: false }\n      ]\n    };\n  }\n});\n","\nTemplate.__checkName(\"users_list_actions\");\nTemplate[\"users_list_actions\"] = new Template(\"Template.users_list_actions\", (function() {\n  var view = this;\n  return HTML.UL(\"\\n    \", HTML.LI(\"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isInvited\"));\n  }, function() {\n    return [ \"\\n        \", HTML.A({\n      \"class\": \"uninvite-link\",\n      href: \"#\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"uninvite\");\n    })), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.A({\n      href: \"#\",\n      \"class\": \"invite-link\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"invite\");\n    })), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"userIsAdmin\"));\n  }, function() {\n    return [ \"\\n        \", HTML.A({\n      \"class\": \"unadmin-link\",\n      href: \"#\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"unadmin\");\n    })), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.A({\n      href: \"#\",\n      \"class\": \"admin-link\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"make_admin\");\n    })), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      \", HTML.A({\n    \"class\": \"delete-link\",\n    href: \"#\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"delete_user\");\n  })), \"\\n    \"), \"\\n  \");\n}));\n","Template.users_list_actions.helpers({\n  isInvited: function() {\n    return this.telescope.isInvited;\n  },\n  userIsAdmin: function(){\n    return Users.is.admin(this);\n  },\n});\n\nTemplate.users_list_actions.events({\n  'click .invite-link': function(e){\n    e.preventDefault();\n    Meteor.users.update(this._id, {$set: {\"telescope.isInvited\": true}});\n\n  },\n  'click .uninvite-link': function(e){\n    e.preventDefault();\n    Meteor.users.update(this._id, {$set: {\"telescope.isInvited\": false}});\n  },\n  'click .admin-link': function(e){\n    e.preventDefault();\n    Users.updateAdmin(this._id, true);\n  },\n  'click .unadmin-link': function(e){\n    e.preventDefault();\n    Users.updateAdmin(this._id, false);\n  },\n  'click .delete-link': function(e){\n    e.preventDefault();\n    if(confirm(i18n.t(\"are_you_sure_you_want_to_delete\")+Users.getDisplayName(this)+\"?\")) {\n      if(confirm(i18n.t(\"delete_users_posts_comments_as_well\"))) {\n        Meteor.call(\"removeUser\", this._id, true, function (error, result) {\n          if (result) {\n            Messages.flash(result);\n          }\n        });\n      } else {\n        Meteor.call(\"removeUser\", this._id, false, function (error, result) {\n          if (result) {\n            Messages.flash(result);\n          }\n        });\n      }\n    }\n  }\n});\n","\nTemplate.__checkName(\"users_list_avatar\");\nTemplate[\"users_list_avatar\"] = new Template(\"Template.users_list_avatar\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"getProfileUrl\"), view.lookup(\".\"));\n    }\n  }, Blaze._TemplateWith(function() {\n    return {\n      user: Spacebars.call(view.lookup(\".\")),\n      shape: Spacebars.call(\"circle\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"avatar\"));\n  }));\n}));\n","\nTemplate.__checkName(\"users_list_created_at\");\nTemplate[\"users_list_created_at\"] = new Template(\"Template.users_list_created_at\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"date\"\n  }, Blaze.View(\"lookup:formatDate\", function() {\n    return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdAt\"), \"LL\");\n  })), \"\\n  \", HTML.DIV({\n    \"class\": \"time-ago\"\n  }, Blaze.View(\"lookup:timeAgo\", function() {\n    return Spacebars.mustache(view.lookup(\"timeAgo\"), view.lookup(\"createdAt\"));\n  })) ];\n}));\n","\nTemplate.__checkName(\"users_list_email\");\nTemplate[\"users_list_email\"] = new Template(\"Template.users_list_email\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return [ \"mailto:\", Spacebars.mustache(Spacebars.dot(view.lookup(\"telescope\"), \"email\")) ];\n    }\n  }, Blaze.View(\"lookup:telescope.email\", function() {\n    return Spacebars.mustache(Spacebars.dot(view.lookup(\"telescope\"), \"email\"));\n  }));\n}));\n","\nTemplate.__checkName(\"users_list_username\");\nTemplate[\"users_list_username\"] = new Template(\"Template.users_list_username\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"getProfileUrl\"), view.lookup(\".\"));\n    }\n  }, Blaze.View(\"lookup:getUsername\", function() {\n    return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\".\"));\n  }));\n}));\n","\nTemplate.__checkName(\"users_list_display_name\");\nTemplate[\"users_list_display_name\"] = new Template(\"Template.users_list_display_name\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"getProfileUrl\"), view.lookup(\".\"));\n    }\n  }, Blaze.View(\"lookup:getDisplayName\", function() {\n    return Spacebars.mustache(view.lookup(\"getDisplayName\"), view.lookup(\".\"));\n  }));\n}));\n","\nTemplate.__checkName(\"user_comments\");\nTemplate[\"user_comments\"] = new Template(\"Template.user_comments\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"user-profile-comments grid grid-module\"\n  }, \"\\n    \", HTML.H3(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"comments\");\n  })), \"\\n    \", Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"arguments\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"commentsListController\"));\n  }), \"\\n  \");\n}));\n","Template.user_comments.helpers({\n  arguments: function () {\n    var user = this;\n    return {\n      template: \"comments_list_compact\",\n      options: {\n        currentUser: user,\n        fieldLabel: i18n.t(\"commentedAt\"),\n        fieldValue: function (comment) {\n          return moment(comment.createdAt).format(\"MM/DD/YYYY, HH:mm\");\n        }\n      },\n      terms: {\n        view: 'userComments',\n        userId: user._id,\n        limit: 5,\n        enableCache: false,\n        subscribeToUsers: false\n      }\n    };\n  }\n});","\nTemplate.__checkName(\"user_downvoted_posts\");\nTemplate[\"user_downvoted_posts\"] = new Template(\"Template.user_downvoted_posts\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"getSetting\"), \"enableDownvotes\");\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"user-profile-votes grid grid-module\"\n    }, \"\\n      \", HTML.H3(Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"downvoted_posts\");\n    })), \"\\n      \", Blaze._TemplateWith(function() {\n      return Spacebars.call(view.lookup(\"arguments\"));\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"posts_list_controller\"));\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n","Template.user_downvoted_posts.helpers({\n  arguments: function () {\n    var user = this;\n    return {\n      template: \"posts_list_compact\",\n      options: {\n        currentUser: user,\n        fieldLabel: i18n.t(\"downvotedAt\"),\n        fieldValue: function (post) {\n          var user = this.currentUser;\n          var vote = _.findWhere(user.telescope.downvotedPosts, {itemId: post._id});\n          return moment(vote.votedAt).format(\"MM/DD/YYYY, HH:mm\");\n        }\n      },\n      terms: {\n        view: 'userDownvotedPosts',\n        userId: user._id,\n        limit: 5,\n        enableCache: false,\n        subscribeToUsers: false\n      }\n    };\n  }\n});","\nTemplate.__checkName(\"user_info\");\nTemplate[\"user_info\"] = new Template(\"Template.user_info\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"user-profile grid grid-module\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"user-profile-avatar\"\n  }, Blaze._TemplateWith(function() {\n    return {\n      user: Spacebars.call(view.lookup(\".\")),\n      size: Spacebars.call(\"large\"),\n      shape: Spacebars.call(\"circle\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"avatar\"));\n  })), \"\\n    \", HTML.TABLE({\n    \"class\": \"user-info\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isAdmin\"));\n  }, function() {\n    return [ \"\\n        \", HTML.TR(\"\\n          \", HTML.TD(Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"id\");\n    }), \": \"), \"\\n          \", HTML.TD(Blaze.View(\"lookup:_id\", function() {\n      return Spacebars.mustache(view.lookup(\"_id\"));\n    })), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n      \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"publicProfileFields\"));\n  }, function() {\n    return [ \"\\n        \", HTML.TR(\"\\n          \", HTML.TD(Blaze.View(\"lookup:label\", function() {\n      return Spacebars.mustache(view.lookup(\"label\"));\n    })), \"\\n          \", HTML.TD(\"\\n            \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"template\"));\n    }, function() {\n      return [ \"\\n              \", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"template\")),\n          data: Spacebars.call(view.lookup(\"value\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n            \" ];\n    }, function() {\n      return [ \"\\n              \", Blaze.View(\"lookup:value\", function() {\n        return Spacebars.mustache(view.lookup(\"value\"));\n      }), \"\\n            \" ];\n    }), \"\\n          \"), \"\\n        \"), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"canEditProfile\"));\n  }, function() {\n    return [ \"\\n      \", HTML.A({\n      \"class\": \"edit-profile-button button btn btn-primary inline\",\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"userEdit\", Spacebars.kw({\n          _idOrSlug: Spacebars.dot(view.lookup(\".\"), \"telescope\", \"slug\")\n        }));\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"edit_profile\");\n    })), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"canInvite\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"isAdmin\"));\n    }, function() {\n      return [ \"\\n        \", HTML.A({\n        \"class\": \"button btn btn-primary inline invite-link\",\n        href: \"#\"\n      }, Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"invite\");\n      })), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"inviteCount\"));\n      }, function() {\n        return [ \"\\n          \", HTML.A({\n          \"class\": \"button btn btn-primary inline invite-link\",\n          href: \"#\"\n        }, Blaze.View(\"lookup:_\", function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"invite\");\n        }), \" (\", Blaze.View(\"lookup:inviteCount\", function() {\n          return Spacebars.mustache(view.lookup(\"inviteCount\"));\n        }), \" \", Blaze.View(\"lookup:_\", function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"left\");\n        }), \")\"), \"\\n        \" ];\n      }, function() {\n        return [ \"\\n          \", HTML.A({\n          \"class\": \"button btn inline disabled\",\n          href: \"#\"\n        }, Blaze.View(\"lookup:_\", function() {\n          return Spacebars.mustache(view.lookup(\"_\"), \"invite_none_left\");\n        })), \"\\n        \" ];\n      }), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n","Template.user_info.helpers({\n  canEditProfile: function() {\n    var currentUser = Meteor.user();\n    return currentUser && (this._id === currentUser._id || Users.is.admin(currentUser));\n  },\n  createdAtFormatted: function() {\n    return this.createdAt;\n  },\n  canInvite: function() {\n    // if the user is logged in, the target user hasn't been invited yet, invites are enabled, and user is not viewing their own profile\n    return Meteor.user() && Meteor.user()._id !== this._id && !Users.is.invited(this) && Telescope.utils.invitesEnabled() && Users.can.invite(Meteor.user());\n  },\n  inviteCount: function() {\n    return Meteor.user().telescope.inviteCount;\n  },\n  getTwitterName: function () {\n    return Users.getTwitterName(this);\n  },\n  getGitHubName: function () {\n    return Users.getGitHubName(this);\n  },\n  publicProfileFields: function () {\n    var user = this;\n    var schema = Users.simpleSchema();\n    var publicData = _.compact(_.map(schema.getProfileFields(), function (fieldName) {\n      if (Telescope.getNestedProperty(user, fieldName)) {\n        var field = schema._schema[fieldName];\n        var item = {\n          label: !!field.label ? field.label: i18n.t(fieldName.replace(\"telescope.\", \"\")),\n          value: Telescope.getNestedProperty(user, fieldName)\n        };\n        if (!!field.template) {\n          item.template = field.template;\n        }\n        return item;\n      }\n    }));\n    return publicData;\n  },\n  isUsingPassword: function  () {\n    return !!this.services.password\n  }\n});\n\nTemplate.user_info.events({\n  'click .invite-link': function(e, instance){\n    var user = this;\n    Meteor.call('inviteUser', {userId: user._id}, function(error, success){\n      if (error) {\n        Messages.flash(error, \"error\");\n        Messages.clearSeen();\n      } else {\n        Messages.flash('Thanks, user has been invited.', \"success\");\n        Messages.clearSeen();\n      }\n    });\n  }\n});\n","\nTemplate.__checkName(\"user_posts\");\nTemplate[\"user_posts\"] = new Template(\"Template.user_posts\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"user-profile-posts grid grid-module\"\n  }, \"\\n    \", HTML.H3(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"submitted_posts\");\n  })), \"\\n    \", Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"arguments\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"posts_list_controller\"));\n  }), \"\\n  \");\n}));\n","Template.user_posts.helpers({\n  arguments: function () {\n    var user = this;\n    return {\n      template: \"posts_list_compact\",\n      options: {\n        currentUser: user,\n        fieldLabel: i18n.t(\"postedAt\"),\n        fieldValue: function (post) {\n          return moment(post.postedAt).format(\"MM/DD/YYYY, HH:mm\");\n        }\n      },\n      terms: {\n        view: 'userPosts',\n        userId: user._id,\n        limit: 5,\n        enableCache: false,\n        subscribeToUsers: false\n      }\n    };\n  }\n});","\nTemplate.__checkName(\"user_upvoted_posts\");\nTemplate[\"user_upvoted_posts\"] = new Template(\"Template.user_upvoted_posts\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"user-profile-votes grid grid-module\"\n  }, \"\\n    \", HTML.H3(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"upvoted_posts\");\n  })), \"\\n    \", Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"arguments\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"posts_list_controller\"));\n  }), \"\\n  \");\n}));\n","Template.user_upvoted_posts.helpers({\n  arguments: function () {\n    var user = this;\n    return {\n      template: \"posts_list_compact\",\n      options: {\n        currentUser: user,\n        fieldLabel: i18n.t(\"upvotedAt\"),\n        fieldValue: function (post) {\n          var user = this.currentUser;\n          var vote = _.findWhere(user.telescope.upvotedPosts, {itemId: post._id});\n          return moment(vote.votedAt).format(\"MM/DD/YYYY, HH:mm\");\n        }\n      },\n      terms: {\n        view: 'userUpvotedPosts',\n        userId: user._id,\n        limit: 5,\n        enableCache: false,\n        subscribeToUsers: false\n      }\n    };\n  }\n});","\nTemplate.__checkName(\"user_profile_bio\");\nTemplate[\"user_profile_bio\"] = new Template(\"Template.user_profile_bio\", (function() {\n  var view = this;\n  return Blaze.View(\"lookup:.\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\".\")));\n  });\n}));\n","\nTemplate.__checkName(\"user_profile_twitter\");\nTemplate[\"user_profile_twitter\"] = new Template(\"Template.user_profile_twitter\", (function() {\n  var view = this;\n  return HTML.A({\n    href: function() {\n      return [ \"http://twitter.com/\", Spacebars.mustache(view.lookup(\".\")) ];\n    },\n    target: \"_blank\"\n  }, Blaze.View(\"lookup:.\", function() {\n    return Spacebars.mustache(view.lookup(\".\"));\n  }));\n}));\n","\nTemplate.__checkName(\"sign_out\");\nTemplate[\"sign_out\"] = new Template(\"Template.sign_out\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"grid-small grid-block dialog\"\n  }, \"\\n    \", HTML.P(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"you_ve_been_signed_out\");\n  })), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"user_edit\");\nTemplate[\"user_edit\"] = new Template(\"Template.user_edit\", (function() {\n  var view = this;\n  return Spacebars.With(function() {\n    return Spacebars.call(view.lookup(\"user\"));\n  }, function() {\n    return [ \"\\n    \", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"canEdit\"), view.lookup(\".\"));\n    }, function() {\n      return [ \"\\n      \", Blaze._TemplateWith(function() {\n        return {\n          zone: Spacebars.call(\"profileEdit\"),\n          moduleData: Spacebars.call(view.lookup(\".\"))\n        };\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"modules\"));\n      }), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"no_rights\")), \"\\n    \" ];\n    }), \"\\n  \" ];\n  });\n}));\n","\nTemplate.__checkName(\"user_complete\");\nTemplate[\"user_complete\"] = new Template(\"Template.user_complete\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"grid-small grid-block dialog user-edit\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"finish-signup-message\"\n  }, \"\\n      \", Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"please_fill_in_missing_information_to_finish_signing_up\");\n  }), \"\\n    \"), \"\\n    \", Blaze._TemplateWith(function() {\n    return {\n      collection: Spacebars.call(\"Meteor.users\"),\n      doc: Spacebars.call(view.lookup(\"user\")),\n      id: Spacebars.call(\"completeUserForm\"),\n      template: Spacebars.call(\"bootstrap3-horizontal\"),\n      \"input-col-class\": Spacebars.call(\"controls\"),\n      type: Spacebars.call(\"method-update\"),\n      meteormethod: Spacebars.call(\"completeUserProfile\"),\n      fields: Spacebars.call(view.lookup(\"requiredFields\"))\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"quickForm\"));\n  }), \"\\n  \");\n}));\n","AutoForm.hooks({\n  completeUserForm: {\n    onError: function(operation, error) {\n      this.template.$('button[type=submit]').removeClass('loading');\n      Messages.flash(error.message.split('|')[0], 'error'); // workaround because error.details returns undefined\n      Messages.clearSeen();\n    }\n  }\n});\n\nTemplate.user_complete.helpers({\n  user: function () {\n    return Meteor.user();\n  },\n  requiredFields: function () {\n    // return fields that are required by the schema but haven't been filled out yet\n    var schema = Users.simpleSchema()._schema;\n    var requiredFields = _.filter(_.keys(schema), function (fieldName) {\n      var field = schema[fieldName];\n      return !!field.required && !Telescope.getNestedProperty(Meteor.user(), fieldName);\n    });\n    return requiredFields;\n  }\n});\n\n// TODO: handle error case when user validates form with blank fields","\nTemplate.__checkName(\"user_item\");\nTemplate[\"user_item\"] = new Template(\"Template.user_item\", (function() {\n  var view = this;\n  return HTML.TR({\n    \"class\": \"user\"\n  }, \"\\n\t\", HTML.TD({\n    \"aria-hidden\": \"true\"\n  }, Blaze._TemplateWith(function() {\n    return {\n      user: Spacebars.call(view.lookup(\".\")),\n      shape: Spacebars.call(\"circle\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"avatar\"));\n  })), \"\\n\t\", HTML.TD(\"\\n\t\t\", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"getProfileUrl\"));\n    }\n  }, Blaze.View(\"lookup:getDisplayName\", function() {\n    return Spacebars.mustache(view.lookup(\"getDisplayName\"), view.lookup(\".\"));\n  })), \"\\n\t\t\", HTML.Raw(\"<br>\"), \"\\n\t\t\", HTML.A({\n    href: function() {\n      return [ \"mailto:\", Spacebars.mustache(view.lookup(\"getEmail\")) ];\n    }\n  }, Blaze.View(\"lookup:getEmail\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmail\"));\n  })), \"\\n\t\"), \"\\n\t\", HTML.TD(Blaze.View(\"lookup:createdAtFormatted\", function() {\n    return Spacebars.mustache(view.lookup(\"createdAtFormatted\"));\n  })), \"\\n\t\", HTML.TD(Blaze.View(\"lookup:postCount\", function() {\n    return Spacebars.mustache(view.lookup(\"postCount\"));\n  })), \"\\n\t\", HTML.TD(Blaze.View(\"lookup:commentCount\", function() {\n    return Spacebars.mustache(view.lookup(\"commentCount\"));\n  })), \"\\n\t\", HTML.TD(Blaze.View(\"lookup:getKarma\", function() {\n    return Spacebars.mustache(view.lookup(\"getKarma\"));\n  })), \"\\n\t\", HTML.TD(\"\\n\t\t\", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"invites\"));\n  }, function() {\n    return [ \"\\n\t\t\", HTML.H4(Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"invited\");\n    }), \" \", Blaze.View(\"lookup:invitedCount\", function() {\n      return Spacebars.mustache(view.lookup(\"invitedCount\"));\n    }), \" \", Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"users\");\n    }), \":\"), \"\\n\t\t\", HTML.UL(\"\\n\t\t\t\", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"invites\"));\n    }, function() {\n      return [ \"\\n\t\t\t\t\", HTML.LI(HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"getInvitedUserProfileUrl\"));\n        }\n      }, Blaze.View(\"lookup:invitedName\", function() {\n        return Spacebars.mustache(view.lookup(\"invitedName\"));\n      }))), \"\\n\t\t\t\" ];\n    }), \"\\n\t\t\"), \"\\n\t\t\" ];\n  }), \"\\n\t\t\", HTML.P(\"(\", Blaze.View(\"lookup:inviteCount\", function() {\n    return Spacebars.mustache(view.lookup(\"inviteCount\"));\n  }), \" \", Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"invites_left\");\n  }), \")\"), \"\\n\t\"), \"\\n\t\", HTML.TD(Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isInvited\"));\n  }, function() {\n    return HTML.I({\n      \"class\": \"icon-check\"\n    });\n  })), \"\\n\t\", HTML.TD(Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"userIsAdmin\"));\n  }, function() {\n    return HTML.I({\n      \"class\": \"icon-check\"\n    });\n  })), \"\\n\t\", HTML.TD(\"\\n\t\t\", HTML.UL(\"\\n\t\t\t\", HTML.LI(Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isInvited\"));\n  }, function() {\n    return HTML.A({\n      \"class\": \"uninvite-link\",\n      href: \"#\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"uninvite\");\n    }));\n  }, function() {\n    return HTML.A({\n      href: \"#\",\n      \"class\": \"invite-link\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"invite\");\n    }));\n  })), \"\\n\t\t\t\", HTML.LI(Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"userIsAdmin\"));\n  }, function() {\n    return HTML.A({\n      \"class\": \"unadmin-link\",\n      href: \"#\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"unadmin\");\n    }));\n  }, function() {\n    return HTML.A({\n      href: \"#\",\n      \"class\": \"admin-link\"\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"make_admin\");\n    }));\n  })), \"\\n\t\t\t\", HTML.LI(HTML.A({\n    \"class\": \"delete-link\",\n    href: \"#\"\n  }, Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"delete_user\");\n  }))), \"\\n\t\t\"), \"\\n\t\"), \"\\n\");\n}));\n","Template.user_item.helpers({\n  createdAtFormatted: function(){\n    return this.createdAt ? moment(this.createdAt).fromNow() : 'â€“';\n  },\n  getEmail: function(){\n    return Users.getEmail(this);\n  },\n  posts: function(){\n    return Posts.find({'userId':this._id});\n  },\n  comments: function(){\n    return Comments.find({'userId':this._id});\n  },\n  userIsAdmin: function(){\n    return Users.is.admin(this);\n  },\n  getProfileUrl: function () {\n    return Users.getProfileUrl(this);\n  },\n  getKarma: function() {\n    return Math.round(100*this.karma)/100;\n  },\n  getInvitedUserProfileUrl: function () {\n    var user = Meteor.users.findOne(this.invitedId);\n    return Users.getProfileUrl(user);\n  }\n});\n\nTemplate.user_item.events({\n  'click .invite-link': function(e, instance){\n    e.preventDefault();\n    Meteor.call('inviteUser', { userId : instance.data._id });\n  },\n  'click .uninvite-link': function(e, instance){\n    e.preventDefault();\n    Meteor.users.update(instance.data._id,{\n      $set:{\n        isInvited: false\n      }\n    });\n  },\n  'click .admin-link': function(e, instance){\n    e.preventDefault();\n    Users.updateAdmin(instance.data._id, true);\n  },\n  'click .unadmin-link': function(e, instance){\n    e.preventDefault();\n    Users.updateAdmin(instance.data._id, false);\n  },\n  'click .delete-link': function(e, instance){\n    e.preventDefault();\n    if(confirm(i18n.t(\"are_you_sure_you_want_to_delete\")+Users.getDisplayName(instance.data)+\"?\"))\n      Meteor.users.remove(instance.data._id);\n  }\n});\n","\nTemplate.__checkName(\"user_profile\");\nTemplate[\"user_profile\"] = new Template(\"Template.user_profile\", (function() {\n  var view = this;\n  return Spacebars.With(function() {\n    return Spacebars.call(view.lookup(\"user\"));\n  }, function() {\n    return [ \"\\n    \", Blaze._TemplateWith(function() {\n      return {\n        zone: Spacebars.call(\"profileDisplay\"),\n        moduleData: Spacebars.call(view.lookup(\".\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"modules\"));\n    }), \"\\n\t\" ];\n  });\n}));\n","Template.user_profile.onCreated(function  () {\n  var user = this.data.user;\n  Telescope.SEO.setTitle(user.getDisplayName());\n});","\nTemplate.__checkName(\"user_menu\");\nTemplate[\"user_menu\"] = new Template(\"Template.user_menu\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": function() {\n      return [ \"user-menu-wrapper \", Spacebars.mustache(view.lookup(\"moduleClass\")) ];\n    }\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"isLoggedIn\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        menuName: Spacebars.call(\"user\"),\n        menuLabelTemplate: Spacebars.call(\"user_menu_label\"),\n        menuItems: Spacebars.call(view.lookup(\"menuItems\")),\n        menuType: Spacebars.call(view.lookup(\"menuType\")),\n        expandLevel: Spacebars.call(0)\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"menuComponent\"));\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"signin-signup\"\n    }, \"\\n        \", HTML.A({\n      \"class\": \"account-link sign-up\",\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"signUp\");\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"sign_up\");\n    })), \"\\n        \", HTML.A({\n      \"class\": \"account-link sign-in\",\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"signIn\");\n      }\n    }, Blaze.View(\"lookup:_\", function() {\n      return Spacebars.mustache(view.lookup(\"_\"), \"sign_in\");\n    })), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n","Template.user_menu.helpers({\n  user: function () {\n    return Meteor.user();\n  },\n  menuItems: function () {\n    var viewableItems = _.reject(Telescope.menuItems.get(\"userMenu\"), function (item) {\n      return (item.adminOnly && !Users.is.admin(Meteor.user()));\n    });\n\n    // viewableItems = viewableItems.map(function (item) {\n    //   item.parentId = \"userMenuRoot\";\n    //   return item;\n    // });\n\n    // viewableItems.push({\n    //   id: \"userMenuRoot\",\n    //   template: \"user_menu_label\"\n    // });\n    // console.log(viewableItems);\n\n    return viewableItems;\n  },\n  menuType: function () {\n    if (this.zone === \"mobileNav\") {\n      return 'collapsible';\n    } else if (Settings.get('navLayout', 'top-nav') === 'top-nav') {\n      return 'dropdown';\n    } else {\n      return 'collapsible';\n    }\n  }\n});\n","\nTemplate.__checkName(\"user_menu_label\");\nTemplate[\"user_menu_label\"] = new Template(\"Template.user_menu_label\", (function() {\n  var view = this;\n  return HTML.A({\n    \"class\": \"menu-label js-menu-toggle\",\n    href: \"#\"\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"menu-label-text user-menu-label\"\n  }, \"\\n      \", Blaze._TemplateWith(function() {\n    return {\n      userId: Spacebars.call(Spacebars.dot(view.lookup(\"user\"), \"_id\")),\n      shape: Spacebars.call(\"circle\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"avatar\"));\n  }), \" \\n      \", HTML.SPAN({\n    \"class\": \"user-menu-username\"\n  }, Blaze.View(\"lookup:user.getDisplayName\", function() {\n    return Spacebars.mustache(Spacebars.dot(view.lookup(\"user\"), \"getDisplayName\"));\n  })), \"\\n    \"), \"\\n    \", HTML.SPAN({\n    \"class\": \"menu-items-toggle\"\n  }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"menuIconExpand\")), \"\\n      \", Spacebars.include(view.lookupTemplate(\"menuIconCollapse\")), \"\\n    \"), \"\\n  \");\n}));\n","Template.user_menu_label.helpers({\n  user: function () {\n    return Meteor.user();\n  }\n});","\nTemplate.__checkName(\"user_controller\");\nTemplate[\"user_controller\"] = new Template(\"Template.user_controller\", (function() {\n  var view = this;\n  return Blaze._TemplateWith(function() {\n    return {\n      ready: Spacebars.call(view.templateInstance().subscriptionsReady())\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"loader\"), function() {\n      return [ \"\\n    \", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"userTemplate\")),\n          data: Spacebars.call(view.lookup(\"data\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n  \" ];\n    });\n  });\n}));\n","Template.user_controller.onCreated(function () {\n  var template = this;\n  template.subscribe('singleUser', FlowRouter.getParam(\"_idOrSlug\"));\n});\n\nTemplate.user_controller.helpers({\n  data: function () {\n\n    var idOrSlug = FlowRouter.getParam(\"_idOrSlug\");\n    var findById = Meteor.users.findOne(idOrSlug);\n    var findBySlug = Meteor.users.findOne({\"telescope.slug\": idOrSlug});\n\n    return {user: findById || findBySlug};\n\n  }\n});","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nvar package_templates = _.difference(_.keys(Template), non_package_templates);\n\nfor (var i = 0; i < package_templates.length; i++) {\n  var package_template = package_templates[i];\n\n  registerI18nTemplate(package_template);\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"please_fill_in_missing_information_to_finish_signing_up\":\"Please fill in missing information below to finish signing up.\",\"bio\":\"Bio\",\"displayName\":\"Name\",\"email\":\"Email\",\"twitterUsername\":\"Twitter Username\",\"website\":\"Website\",\"htmlBio\":\"Bio\",\"user_profile_saved\":\"User profile saved\",\"this_email_is_already_taken\":\"This email is already taken\",\"all_fields_are_required\":\"All fields are required\",\"please_complete_your_profile_below_before_continuing\":\"Please complete your profile below before continuing.\",\"account\":\"Account\",\"username\":\"Username\",\"display_name\":\"Display Name\",\"city\":\"City\",\"twitter_username\":\"Twitter Username\",\"github_username\":\"GitHub Username\",\"site_url\":\"Site URL\",\"password\":\"Password\",\"change_password\":\"Change Password?\",\"old_password\":\"Old Password\",\"new_password\":\"New Password\",\"email_notifications\":\"Email Notifications\",\"new_users\":\"New users\",\"new_posts\":\"New Posts\",\"comments_on_my_posts\":\"Comments on my posts\",\"replies_to_my_comments\":\"Replies to my comments\",\"comments\":\"Comments\",\"forgot_password\":\"Forgot password?\",\"profile_updated\":\"Profile updated\",\"please_fill_in_your_email_below_to_finish_signing_up\":\"Please fill in your email below to finish the registration.\",\"invite\":\"Invite\",\"uninvite\":\"Uninvite\",\"make_admin\":\"Make admin\",\"unadmin\":\"Unadmin\",\"delete_user\":\"Delete User\",\"are_you_sure_you_want_to_delete\":\"Are you sure you want to delete \",\"reset_password\":\"Reset Password\",\"password_reset_link_sent\":\"Password reset link sent!\",\"name\":\"Name\",\"posts\":\"Posts\",\"comments_\":\"Comments\",\"karma\":\"Karma\",\"is_invited\":\"Is Invited?\",\"is_admin\":\"Is Admin?\",\"delete\":\"Delete\",\"member_since\":\"Member since\",\"edit_profile\":\"Edit profile\",\"sign_in\":\"Sign In\",\"sign_in_\":\"Sign in!\",\"sign_up_\":\"Register!\",\"dont_have_an_account\":\"Don't have an account?\",\"already_have_an_account\":\"Already have an account?\",\"downvotedAt\":\"Downvoted at\",\"sign_up\":\"Register\",\"postedAt\":\"Posted at\",\"please_fill_in_all_fields\":\"Please fill in all fields\",\"upvotedAt\":\"Upvoted at\",\"invite_\":\"Invite \",\"left\":\" left\",\"invite_none_left\":\"Invite (none left)\",\"all\":\"All\",\"invited\":\"Invited\",\"uninvited\":\"Uninvited\",\"filter_by\":\"Filter by\",\"sort_by\":\"Sort by\",\"you_have_been_logged_out\":\"You have been logged out\",\"delete_users_posts_comments_as_well\":\"Delete user's posts and comments as well?\",\"commentedAt\":\"Commented at\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:users\",\n    namespace = \"telescope:users\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n"]}