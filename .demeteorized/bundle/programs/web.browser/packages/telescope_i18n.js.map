)]}'
{"version":3,"sources":["meteor://ðŸ’»app/i18n.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAI,GAAG,EAAE,CAAC;;;AAGV,IAAI,CAAC,WAAW,GAAG,UAAU,QAAQ,EAAE;;;;;AAKrC,SAAO,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;;AAElC,MAAI,QAAQ,CAAC,WAAW,EAAE,KAAK,IAAI,EAAE;AACnC,WAAO,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;GAClC,MAAM;AACL,KAAC,CAAC,SAAS,CAAC,wDAAwD,GAAG,QAAQ,CAAC,WAAW,EAAE,GAAG,KAAK,EAAE,UAAU,MAAM,EAAE;AACvH,YAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACxB,aAAO,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AACjC,aAAO,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;;KAEvC,CAAC,CAAC;GACJ;;;AAGD,SAAO,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;;AAEnC,SAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAC1B,IAAI,CAAC,YAAY;AAChB,WAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;;GAEnC,CAAC,CAAC;;;AAGL,KAAG,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;CAC3B,CAAC;;AAEF,IAAI,CAAC,CAAC,GAAG,UAAU,GAAG,EAAE,OAAO,EAAE;AAC/B,MAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,WAAO,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;GACjE,MAAM;AACL,WAAO,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;GACjC;CACF,CAAC;;AAEF,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,GAAG,YAAU;AACtD,MAAI,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;AACzC,GAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,EAAE;AACtC,QAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;AACnB,YAAM,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,YAAY;;AAE9B,YAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;AAC3B,aAAG,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;SAC9B;AACD,eAAO,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;OACpB,CAAC;KACH;GACF,CAAC,CAAC;AACH,SAAO,IAAI,CAAC;CACb,CAAC;;AAEF,MAAM,CAAC,OAAO,CAAC,YAAY;;AAEzB,MAAI,MAAM,CAAC,QAAQ,EAAE;AACnB,QAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;GAClD;CAEF,CAAC,CAAC,2F","file":"/packages/telescope_i18n.js","sourcesContent":["i18n = {};\n\n// do this better:\ni18n.setLanguage = function (language) {\n  // Session.set('i18nReady', false);\n  // console.log('i18n loadingâ€¦ '+language)\n\n  // moment\n  Session.set('momentReady', false);\n  // console.log('moment loadingâ€¦')\n  if (language.toLowerCase() === \"en\") {\n    Session.set('momentReady', true);\n  } else {\n    $.getScript(\"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/lang/\" + language.toLowerCase() + \".js\", function (result) {\n      moment.locale(language);\n      Session.set('momentReady', true);\n      Session.set('momentLocale', language);\n      // console.log('moment loaded!')\n    });\n  }\n\n  // TAPi18n\n  Session.set(\"TAPi18nReady\", false);\n  // console.log('TAPi18n loadingâ€¦')\n  TAPi18n.setLanguage(language)\n    .done(function () {\n      Session.set(\"TAPi18nReady\", true);\n      // console.log('TAPi18n loaded!')\n    });\n\n  // T9n\n  T9n.setLanguage(language);\n};\n\ni18n.t = function (str, options) {\n  if (Meteor.isServer) {\n    return TAPi18n.__(str, options, Settings.get('language', 'en'));\n  } else {\n    return TAPi18n.__(str, options);\n  }\n};\n\nMongo.Collection.prototype.internationalize = function(){\n  var schema = this.simpleSchema()._schema;\n  _.each(schema, function (property, key) {\n    if (!property.label) {\n      schema[key].label = function () {\n        // if property is nested (\"telescope.email\"), only consider the last part (\"email\")\n        if (key.indexOf(\".\") !== -1) {\n          key = _.last(key.split(\".\"));\n        }\n        return i18n.t(key);\n      };\n    }\n  });\n  return this;\n};\n\nMeteor.startup(function () {\n\n  if (Meteor.isClient) {\n    i18n.setLanguage(Settings.get('language', 'en'));\n  }\n\n});"]}