)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/utilities_menu/lib/helpers.js","meteor://ðŸ’»app/packages/utilities_menu/lib/template.menu_component.js","meteor://ðŸ’»app/packages/utilities_menu/lib/menu_component.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2H;;;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;;;;;;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H","file":"/packages/utilities_menu.js","sourcesContent":["getCurrentPath = function () {\n  if (typeof Router !== \"undefined\") {\n    return Router.current().path;\n  } else if (typeof FlowRouter !== \"undefined\") {\n    FlowRouter.watchPathChange()\n    return FlowRouter.current().path;\n  } else {\n    throw new Error(\"Please use Flow Router or Iron Router\");\n  }  \n};\n\ngetRoute = function (item) {\n  // if route is a Function return its result, else apply Router.path() to it\n  if (typeof item.route === \"function\") {\n    return item.route();\n  } else {\n    if (typeof Router !== \"undefined\") {\n      return Router.path(item.route);\n    } else if (typeof FlowRouter !== \"undefined\") {\n      return FlowRouter.path(item.route);\n    } else {\n      throw new Error(\"Please use Flow Router or Iron Router\");\n    }\n  }\n};\n\ngetChildMenuItems = function (node) {\n  // don't try to find child menu items if current element doesn't have an id\n  if (node.item._id) {\n\n    var level = node.level;\n    var childLevel = level + 1;\n    var menuItems = node.menu.menuItems;\n\n    menuItems = _.filter(menuItems, function (item) {\n      // return elements with the correct parentId\n      return item.parentId === node.item._id;\n    });\n\n    // build \"node container\" object\n    menuItems = _.map(menuItems, function (item) {\n      return {\n        menu: node.menu,\n        level: childLevel,\n        item: item\n      };\n    });\n    return menuItems;\n\n  } else {\n    return [];\n  }\n};","\nTemplate.__checkName(\"menuComponent\");\nTemplate[\"menuComponent\"] = new Template(\"Template.menuComponent\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": function() {\n      return [ \"menu-component \", Spacebars.mustache(view.lookup(\"menuClass\")), \" js-menu-container\" ];\n    }\n  }, \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"showMenuLabel\"));\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      \"class\": \"menu-label-wrapper\"\n    }, \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"menuLabelTemplate\"));\n    }, function() {\n      return [ \"\\n          \", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"menuLabelTemplate\")),\n          data: Spacebars.call(view.lookup(\"menuLabelData\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"defaultMenuLabel\")), \"\\n        \" ];\n    }), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"showRootMenuItems\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.With(function() {\n      return Spacebars.call(view.lookup(\"rootMenuItems\"));\n    }, function() {\n      return [ \"\\n        \", HTML.UL({\n        \"class\": \"menu-items js-menu-items\",\n        role: \"menu\",\n        \"aria-labelledby\": \"dLabel\"\n      }, \"\\n          \", Blaze.Each(function() {\n        return Spacebars.call(view.lookup(\".\"));\n      }, function() {\n        return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"menuItem\")), \"\\n          \" ];\n      }), \"\\n        \"), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n\\n  \");\n}));\n\nTemplate.__checkName(\"defaultMenuLabel\");\nTemplate[\"defaultMenuLabel\"] = new Template(\"Template.defaultMenuLabel\", (function() {\n  var view = this;\n  return HTML.A({\n    \"class\": \"menu-label js-menu-toggle\",\n    href: \"#\"\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"menu-label-text\"\n  }, Blaze.View(\"lookup:getMenuLabel\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"getMenuLabel\")));\n  })), \"\\n    \", HTML.SPAN({\n    \"class\": \"menu-items-toggle\"\n  }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"menuIconExpand\")), \"\\n      \", Spacebars.include(view.lookupTemplate(\"menuIconCollapse\")), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"menuItem\");\nTemplate[\"menuItem\"] = new Template(\"Template.menuItem\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": function() {\n      return [ \"menu-item \", Spacebars.mustache(view.lookup(\"itemClass\")), \" js-menu-container\" ];\n    }\n  }, \"\\n  \\n    \", HTML.DIV({\n    \"class\": \"menu-item-label-wrapper\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"getTemplate\"));\n  }, function() {\n    return [ \"\\n        \", Blaze._TemplateWith(function() {\n      return {\n        template: Spacebars.call(view.lookup(\"getTemplate\"))\n      };\n    }, function() {\n      return Spacebars.include(function() {\n        return Spacebars.call(Template.__dynamic);\n      });\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"defaultMenuItem\")), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"showChildMenu\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.With(function() {\n      return Spacebars.call(view.lookup(\"childMenuItems\"));\n    }, function() {\n      return [ \"\\n        \", HTML.UL({\n        \"class\": \"menu-child-items js-menu-items\"\n      }, \"\\n          \", Blaze.Each(function() {\n        return Spacebars.call(view.lookup(\".\"));\n      }, function() {\n        return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"menuItem\")), \"\\n          \" ];\n      }), \"\\n        \"), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }), \"\\n\\n  \");\n}));\n\nTemplate.__checkName(\"defaultMenuItem\");\nTemplate[\"defaultMenuItem\"] = new Template(\"Template.defaultMenuItem\", (function() {\n  var view = this;\n  return [ HTML.A({\n    \"class\": \"menu-item-label\",\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"itemRoute\"));\n    }\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"menu-item-label-text\"\n  }, Blaze.View(\"lookup:getItemLabel\", function() {\n    return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"getItemLabel\")));\n  })), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"getItemDescription\"));\n  }, function() {\n    return HTML.SPAN({\n      \"class\": \"menu-item-label-description\"\n    }, Blaze.View(\"lookup:getItemDescription\", function() {\n      return Spacebars.mustache(view.lookup(\"getItemDescription\"));\n    }));\n  }), \"\\n  \"), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"childMenuItems\"));\n  }, function() {\n    return [ \"\\n    \", HTML.A({\n      \"class\": \"menu-items-toggle js-menu-toggle\",\n      href: \"#\"\n    }, \"\\n      \", HTML.SPAN({\n      \"class\": \"menu-icon-expand\"\n    }, Spacebars.include(view.lookupTemplate(\"menuIconExpand\"))), \"\\n      \", HTML.SPAN({\n      \"class\": \"menu-icon-collapse\"\n    }, Spacebars.include(view.lookupTemplate(\"menuIconCollapse\"))), \"\\n    \"), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"menuIconExpand\");\nTemplate[\"menuIconExpand\"] = new Template(\"Template.menuIconExpand\", (function() {\n  var view = this;\n  return HTML.SPAN({\n    \"class\": \"menu-icon menu-icon-expand\"\n  }, \"\\n    \", HTML.SVG({\n    \"class\": \"icon icon-angle-right\"\n  }, HTML.USE({\n    \"xlink:href\": \"#icon-angle-right\"\n  })), \"\\n    \", HTML.SYMBOL({\n    id: \"icon-angle-right\",\n    viewBox: \"0 0 366 1024\"\n  }, \"\\n      \", HTML.TITLE(\"angle-right\"), \"\\n      \", HTML.PATH({\n    \"class\": \"path1\",\n    d: \"M340 548.571q0 7.429-5.714 13.143l-266.286 266.286q-5.714 5.714-13.143 5.714t-13.143-5.714l-28.571-28.571q-5.714-5.714-5.714-13.143t5.714-13.143l224.571-224.571-224.571-224.571q-5.714-5.714-5.714-13.143t5.714-13.143l28.571-28.571q5.714-5.714 13.143-5.714t13.143 5.714l266.286 266.286q5.714 5.714 5.714 13.143z\"\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"menuIconCollapse\");\nTemplate[\"menuIconCollapse\"] = new Template(\"Template.menuIconCollapse\", (function() {\n  var view = this;\n  return HTML.SPAN({\n    \"class\": \"menu-icon menu-icon-collapse\"\n  }, \"\\n    \", HTML.SVG({\n    \"class\": \"icon icon-angle-down\"\n  }, HTML.USE({\n    \"xlink:href\": \"#icon-angle-down\"\n  })), \"\\n    \", HTML.SYMBOL({\n    id: \"icon-angle-down\",\n    viewBox: \"0 0 658 1024\"\n  }, \"\\n      \", HTML.TITLE(\"angle-down\"), \"\\n      \", HTML.PATH({\n    \"class\": \"path1\",\n    d: \"M614.286 420.571q0 7.429-5.714 13.143l-266.286 266.286q-5.714 5.714-13.143 5.714t-13.143-5.714l-266.286-266.286q-5.714-5.714-5.714-13.143t5.714-13.143l28.571-28.571q5.714-5.714 13.143-5.714t13.143 5.714l224.571 224.571 224.571-224.571q5.714-5.714 13.143-5.714t13.143 5.714l28.571 28.571q5.714 5.714 5.714 13.143z\"\n  }), \"\\n    \"), \"\\n  \");\n}));\n","\n// ------------------------------- menuComponent ------------------------------- //\n\nTemplate.menuComponent.onCreated(function () {\n\n  var menu = this.data;\n\n  // if menu has a custom item template specified, make that template inherit helpers and events from defaultMenuItem\n  if (menu.itemTemplate) {\n    Template[menu.itemTemplate].inheritsHelpersFrom(\"defaultMenuItem\");\n    Template[menu.itemTemplate].inheritsEventsFrom(\"defaultMenuItem\");\n  }\n\n  var expandLevel = typeof menu.expandLevel === \"undefined\" ? 1 : menu.expandLevel;\n  this.expanded = new ReactiveVar(expandLevel > 0 || expandLevel === \"all\");\n\n});\n\nTemplate.menuComponent.helpers({\n\n  // generate menu's CSS class\n  menuClass: function () {\n    var classes = [this.menuName+\"-menu\"];\n    var count = this.menuItems.length;\n\n\n    if (!!this.menuType) {\n      classes.push(\"menu-\"+this.menuType);\n    } else {\n      classes.push(\"menu-list\");\n    }\n\n    if (!!this.menuClass) {\n      classes.push(this.menuClass);\n    }\n\n    if (count) {\n      classes.push(\"menu-has-items\");\n    } else {\n      classes.push(\"menu-no-items\");\n    }\n\n    if (Template.instance().expanded.get()) {\n      classes.push(\"menu-expanded\");\n    } else {\n      classes.push(\"menu-collapsed\");\n    }\n\n    return _.unique(classes).join(\" \");\n  },\n\n  // whether to show the menu label or not\n  showMenuLabel: function () {\n    return !!this.menuLabelTemplate || !!this.menuLabel;\n  },\n\n  // whether to show the root menu items or not\n  showRootMenuItems: function () {\n    // if this is a dropdown or list menu, always show root menu items\n    return this.menuType === \"list\" || this.menuType === \"dropdown\" || Template.instance().expanded.get();\n  },\n\n  // get the original set of root menu items\n  rootMenuItems: function () {\n\n    var menu = this;\n    var menuItems = menu.menuItems;\n\n    // get root elements\n    menuItems = _.filter(menuItems, function(item) {\n      return typeof item.parentId === \"undefined\";\n    });\n    \n    // build \"node container\" object\n    menuItems = _.map(menuItems, function (item) {\n      return {\n        menu: menu,\n        level: 0,\n        item: item\n      };\n    });\n    \n    return menuItems;\n\n  }\n\n});\n\nTemplate.menuComponent.events({\n\n  'click .js-menu-toggle': function (e) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n\n    var expanded = Template.instance().get(\"expanded\");\n    expanded.set(!expanded.get());\n  }\n\n});\n\n// ------------------------------- defaultMenuLabel ------------------------------- //\n\nTemplate.defaultMenuLabel.helpers({\n  getMenuLabel: function () {\n    return typeof this.menuLabel === \"function\" ? this.menuLabel() :  this.menuLabel;\n  }\n});\n\n// ------------------------------- menuItem ------------------------------- //\n\nTemplate.menuItem.onCreated(function () {\n\n  var template = this;\n  template.expanded = new ReactiveVar(false);\n\n  // if menu item has a custom template specified, make that template inherit helpers from defaultMenuItem\n  if (template.data.item.template) {\n    Template[template.data.item.template].inheritsHelpersFrom(\"defaultMenuItem\");\n    Template[template.data.item.template].inheritsEventsFrom(\"defaultMenuItem\");\n  }\n\n  // get menu expand level, or else default to 1\n  var expandLevel = typeof template.data.menu.expandLevel === \"undefined\" ? 1 : template.data.menu.expandLevel;\n  \n  template.autorun(function (){\n    // expand item if: \n    // 1. item is marked as expanded in menu items (reactive)\n    // 2. item is at a lower level than the menu's expand level\n    // 3. menu's expand level is set to \"all\"\n    var itemExpanded = Template.currentData().item.isExpanded; // âš¡ reactive âš¡\n    template.expanded.set(itemExpanded || template.data.level < expandLevel - 1 || expandLevel === \"all\");\n  });\n\n});\n\nTemplate.menuItem.helpers({\n\n  // custom templates can be specified at the menu or menu item level\n  getTemplate: function () {\n    return this.item.template || this.menu.itemTemplate;\n  },\n  \n  // generate item's CSS class\n  itemClass: function () {\n    var classes = [];\n    var currentPath = getCurrentPath();\n    var isActive = this.item.route && (getRoute(this.item) === currentPath || getRoute(this.item) === Meteor.absoluteUrl() + currentPath.substr(1));\n\n    if (isActive) {\n      // substr(1) is to avoid having two \"/\" in the URL\n      classes.push(\"item-active\");\n    }\n\n    if (getChildMenuItems(this).length) {\n      classes.push(\"menu-item-has-children\");\n    } else {\n      classes.push(\"menu-item-no-children\");\n    }\n\n    if (Template.instance().expanded.get()) {\n      classes.push(\"menu-expanded\");\n    } else {\n      classes.push(\"menu-collapsed\");\n    }\n\n    if (this.item.itemClass) {\n      classes.push(this.item.itemClass);\n    }\n\n    classes.push(\"menu-level-\" + this.level);\n    \n    return _.unique(classes).join(\" \");;\n  },\n\n  showChildMenu: function () {\n    // if this is a dropdown or list menu, always show children\n    return this.menu.menuType === \"list\" || this.menu.menuType === \"dropdown\" || Template.instance().expanded.get();\n  },\n\n  // generate array of child menu items\n  childMenuItems: function () {    \n    return getChildMenuItems(this);\n  }\n\n});\n\n// ------------------------------- defaultMenuItem ------------------------------- //\n\nTemplate.defaultMenuItem.helpers({\n\n  // the item's label\n  getItemLabel: function () {\n    return typeof this.item.label === \"function\" ? this.item.label() :  this.item.label;\n  },\n\n  // the item's description\n  getItemDescription: function () {\n    return typeof this.item.description === \"function\" ? this.item.description() :  this.item.description;\n  },\n\n  // the item's route\n  itemRoute: function () {\n    return getRoute(this.item);\n  },\n\n  // generate array of child menu items\n  childMenuItems: function () {    \n    return getChildMenuItems(this);\n  }\n});\n\nTemplate.defaultMenuItem.events({\n\n  'click .js-menu-toggle': function (e) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n\n    var expanded = Template.instance().get(\"expanded\");\n    expanded.set(!expanded.get());\n  }\n\n});"]}