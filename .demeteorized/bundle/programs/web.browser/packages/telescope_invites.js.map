)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/telescope_invites/package-i18n.js","meteor://ðŸ’»app/lib/invites.js","meteor://ðŸ’»app/packages/telescope_invites/lib/client/templates/template.user_invites.js","meteor://ðŸ’»app/lib/client/templates/user_invites.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/ar.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/bg.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/cs.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/da.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/de.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/el.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/en.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/es.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/et.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/fr.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/hu.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/id.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/it.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/ja.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/kk.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/ko.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/nl.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/pl.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/pt-BR.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/ro.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/ru.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/sl.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/sv.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/th.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/tr.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/vi.i18n.js","meteor://ðŸ’»app/packages/telescope_invites/packages/telescope_invitesi18n/zh-CN.i18n.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH","file":"/packages/telescope_invites.js","sourcesContent":["TAPi18n.packages[\"telescope:invites\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n// define the package's templates registrar\nregisterI18nTemplate = TAPi18n._getRegisterHelpersProxy(\"telescope:invites\");\nregisterTemplate = registerI18nTemplate; // XXX OBSOLETE, kept for backward compatibility will be removed in the future\n\n// Record the list of templates prior to package load\nvar _ = Package.underscore._;\nnon_package_templates = _.keys(Template);\n","var InviteSchema = new SimpleSchema({\n  _id: {\n    type: String,\n    optional: true\n  },\n  invitingUserId: {\n    type: String,\n    optional: true\n  },\n  invitedUserEmail: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  accepted: {\n    type: Boolean,\n    optional: true\n  }\n});\n\nInvites = new Meteor.Collection(\"invites\");\nInvites.attachSchema(InviteSchema);\n\nUsers.addField([\n  /**\n    A count of the user's remaining invites\n  */\n  {\n    fieldName: \"telescope.inviteCount\",\n    fieldSchema: {\n      type: Number,\n      optional: true\n    }\n  },\n  /**\n    A count of how many users have been invited by the user\n  */\n  {\n    fieldName: \"telescope.invitedCount\",\n    fieldSchema: {\n      type: Number,\n      optional: true\n    }\n  },\n  /**\n    Whether the user is invited or not\n  */\n  {\n    fieldName: \"telescope.isInvited\",\n    fieldSchema: {\n      type: Boolean,\n      public: true,\n      optional: true,\n      editableBy: [\"admin\"],\n      autoform: {\n        omit: true\n      }\n    }\n  },\n  /**\n    The _id of the user who invited the current user\n  */\n  {\n    fieldName: \"telescope.invitedBy\",\n    fieldSchema: {\n      type: String,\n      optional: true,\n      autoform: {\n        omit: true\n      }\n    }\n  },\n  /**\n    The name of the user who invited the current user\n  */\n  {\n    fieldName: \"telescope.invitedByName\",\n    fieldSchema: {\n      type: String,\n      optional: true,\n      autoform: {\n        omit: true\n      }\n    }\n  }\n]);\n\n// invites are managed through Meteor method\n\nInvites.deny({\n  insert: function(){ return true; },\n  update: function(){ return true; },\n  remove: function(){ return true; }\n});\n\nTelescope.modules.add(\"profileEdit\", {\n  template: 'user_invites',\n  order: 2\n});\n\n function setStartingInvites (user) {\n  // give new users a few invites (default to 3)\n  user.telescope.inviteCount = Settings.get('startInvitesCount', 3);\n  return user;\n}\nTelescope.callbacks.add(\"onCreateUser\", setStartingInvites);\n\n// on profile completion, check if the new user has been invited\n// if so set her status accordingly and update invitation info\nfunction checkIfInvited (user) {\n\n  var invite = Invites.findOne({ invitedUserEmail : Users.getEmail(user) });\n\n  if(invite){\n\n    var invitedBy = Meteor.users.findOne({ _id : invite.invitingUserId });\n\n    Users.update(user._id, { $set: {\n      \"telescope.isInvited\": true,\n      \"telescope.invitedBy\": invitedBy._id,\n      \"telescope.invitedByName\": Users.getDisplayName(invitedBy)\n    }});\n\n    Invites.update(invite._id, {$set : {\n      accepted : true\n    }});\n\n  }\n}\nTelescope.callbacks.add(\"profileCompletedAsync\", checkIfInvited);\n","\nTemplate.__checkName(\"user_invites\");\nTemplate[\"user_invites\"] = new Template(\"Template.user_invites\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"grid-small grid-block dialog admin\"\n  }, HTML.Raw(\"\\n    <h3>Invites</h3>\\n    \\n    \"), Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"canCurrentUserInvite\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        schema: Spacebars.call(view.lookup(\"invitesSchema\")),\n        id: Spacebars.call(\"inviteForm\"),\n        \"class\": Spacebars.call(\"form-block\"),\n        type: Spacebars.call(\"method\"),\n        meteormethod: Spacebars.call(\"inviteUser\")\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"autoForm\"), function() {\n        return [ \"\\n        \", HTML.H3(\"Invite someone\"), \"\\n        \", HTML.DIV({\n          \"class\": \"control-group\"\n        }, \"\\n          \", HTML.LABEL(\"Email\"), \"\\n          \", HTML.DIV({\n          \"class\": \"controls\"\n        }, \"\\n            \", Blaze._TemplateWith(function() {\n          return {\n            name: Spacebars.call(\"invitedUserEmail\")\n          };\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"afFieldInput\"));\n        }), \"\\n          \"), \"\\n        \"), \"\\n        \", HTML.DIV({\n          \"class\": \"form-actions\"\n        }, \"\\n          \", Blaze.If(function() {\n          return Spacebars.dataMustache(view.lookup(\"afFieldIsInvalid\"), Spacebars.kw({\n            name: \"invitedUserEmail\"\n          }));\n        }, function() {\n          return \"\\n            This is not a valid email\\n          \";\n        }), \"\\n          \", HTML.INPUT({\n          type: \"submit\",\n          \"class\": \"button btn btn-primary\",\n          value: \"Invite\"\n        }), \"\\n        \"), \"\\n      \" ];\n      });\n    }), \"\\n    \" ];\n  }), \"\\n\\n    \", HTML.TABLE(\"\\n      \", HTML.THEAD(\"\\n        \", HTML.TR(\"\\n          \", HTML.TD(\"Email\"), \"\\n          \", HTML.TD(\"Accepted\"), \"\\n        \"), \"\\n      \"), \"\\n      \", HTML.TBODY(\"\\n          \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"invites\"));\n  }, function() {\n    return [ \"\\n          \", HTML.TR(\"\\n            \", HTML.TD(Blaze.View(\"lookup:invitedUserEmail\", function() {\n      return Spacebars.mustache(view.lookup(\"invitedUserEmail\"));\n    })), \"\\n            \", HTML.TD(Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"accepted\"));\n    }, function() {\n      return Blaze.View(\"lookup:icon\", function() {\n        return Spacebars.makeRaw(Spacebars.mustache(view.lookup(\"icon\"), \"voted\"));\n      });\n    })), \"\\n          \"), \"\\n          \" ];\n  }), \"\\n      \"), \"\\n    \"), \"\\n\\n  \");\n}));\n","Template.user_invites.created = function () {\n\n  var user = this.data;\n  var instance = this;\n\n  instance.invites = new ReactiveVar({});\n\n  Meteor.autorun(function () {\n    Telescope.subsManager.subscribe('invites', user._id);\n    var invites = Invites.find({invitingUserId: user._id});\n    instance.invites.set(invites);\n  });\n};\n\nTemplate.user_invites.helpers({\n  canCurrentUserInvite: function () {\n    var currentUser = Meteor.user();\n    return currentUser && (Users.is.admin(currentUser) || currentUser.telescope.inviteCount > 0 && Users.can.invite(currentUser));\n  },\n  invitesLeft: function () {\n    var currentUser = Meteor.user();\n    return (currentUser && !(Users.is.admin(currentUser))) ? (currentUser.telescope.inviteCount - currentUser.telescope.invitedCount) : 0\n  },\n  invitesSchema: function () {\n    // expose schema for Invites (used by AutoForm)\n    return Invites.simpleSchema();\n  },\n  invites: function () {\n    return Template.instance().invites.get();\n  }\n});\n\nvar scrollUp = function(){\n  Deps.afterFlush(function() {\n    var element = $('.grid > .error');\n    $('html, body').animate({scrollTop: element.offset().top});\n  });\n};\n\nAutoForm.hooks({\n  inviteForm: {\n    onSuccess: function(operation, result) {\n      Messages.clearSeen();\n\n      if(result && result.newUser){\n        Messages.flash('An invite has been sent out. Thank you!', \"success\");\n      } else {\n        Messages.flash('Thank you!', \"info\");\n      }\n      scrollUp();\n    },\n\n    onError: function(operation, error) {\n      Messages.clearSeen();\n\n      if(error && error.reason){\n        Messages.flash(error.reason, \"error\");\n        scrollUp();\n      }\n    }\n  }\n});\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nvar package_templates = _.difference(_.keys(Template), non_package_templates);\n\nfor (var i = 0; i < package_templates.length; i++) {\n  var package_template = package_templates[i];\n\n  registerI18nTemplate(package_template);\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"translation_key\":\"translation string\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:invites\",\n    namespace = \"telescope:invites\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n"]}