)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/package-i18n.js","meteor://ðŸ’»app/lib/subscribe-to-posts.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/lib/client/templates/template.post_subscribe.js","meteor://ðŸ’»app/lib/client/templates/post_subscribe.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/lib/client/templates/template.user_subscribed_posts.js","meteor://ðŸ’»app/lib/client/templates/user_subscribed_posts.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ar.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/bg.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/cs.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/da.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/de.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/el.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/en.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/es.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/et.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/fr.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/hu.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/id.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/it.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ja.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/kk.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ko.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/nl.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/pl.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/pt-BR.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ro.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/ru.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/sl.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/sv.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/th.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/tr.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/vi.i18n.js","meteor://ðŸ’»app/packages/telescope_subscribe-to-posts/packages/telescope_subscribe-to-postsi18n/zh-CN.i18n.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;ACXA,KAAK,CAAC,QAAQ,CAAC;AACb,WAAS,EAAE,2BAA2B;AACtC,aAAW,EAAE;AACX,QAAI,EAAE,MAAM;AACZ,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE;AACR,UAAI,EAAE,IAAI;KACX;GACF;CACF,CAAC,CAAC;;AAEH,KAAK,CAAC,QAAQ,CAAC;AACb,WAAS,EAAE,aAAa;AACxB,aAAW,EAAE;AACX,QAAI,EAAE,CAAC,MAAM,CAAC;AACd,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE;AACR,UAAI,EAAE,IAAI;KACX;GACF;CACF,CAAC,CAAC;;AAEH,KAAK,CAAC,QAAQ,CAAC;AACb,WAAS,EAAE,iBAAiB;AAC5B,aAAW,EAAE;AACX,QAAI,EAAE,MAAM;AACZ,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE;AACR,UAAI,EAAE,IAAI;KACX;GACF;CACF,CAAC,CAAC;;AAEH,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE;AACnC,UAAQ,EAAE,uBAAuB;AACjC,OAAK,EAAE,CAAC;CACT,CAAC,CAAC;;AAEH,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE;AAC3C,UAAQ,EAAE,gBAAgB;AAC1B,OAAK,EAAE,EAAE;CACV,CAAC,CAAC;;AAEH,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,qBAAqB,EAAE,UAAU,KAAK,EAAE;AACtD,MAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;MACzC,QAAQ,GAAG,EAAE,CAAC;;AAElB,MAAI,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,EAAE;AAClF,YAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;GACpE;;AAED,SAAO;AACL,QAAI,EAAE,EAAC,GAAG,EAAE,EAAC,GAAG,EAAE,QAAQ,EAAC,EAAC;AAC5B,WAAO,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,EAAC,QAAQ,EAAE,CAAC,CAAC,EAAC,EAAC;GAC1C,CAAC;CACH,CAAC,CAAC;;AAEH,IAAI,iBAAiB,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE;AAC5C,SAAO,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;CACrE,CAAC;;AAEF,IAAI,iBAAiB,GAAG,UAAU,MAAM,EAAE,IAAI,EAAE,cAAc,EAAE;AAC9D,MAAI,KAAK,GAAG,4BAA4B,GAAG,cAAc,CAAC;AAC1D,MAAI,GAAG,GAAG,EAAE,CAAC;AACb,KAAG,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AAClB,QAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,MAAM,EAAC,EAAE;AACjC,aAAS,EAAE,GAAG;GACf,CAAC,CAAC;CACJ,CAAC;;AAEF,IAAI,oBAAoB,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE,cAAc,EAAE;AACnE,MAAI,KAAK,GAAG,4BAA4B,GAAG,cAAc,CAAC;AAC1D,MAAI,MAAM,GAAG,EAAE,CAAC;AAChB,QAAM,CAAC,KAAK,CAAC,GAAG,EAAC,MAAM,EAAE,MAAM,EAAC,CAAC;AACjC,QAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,MAAM,EAAC,EAAE;AACjC,SAAK,EAAE,MAAM;GACd,CAAC,CAAC;CACJ,CAAC;;AAEF,aAAa,GAAG,UAAU,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE;AAClD,MAAI,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC;MACjC,cAAc,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAE3F,MAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,EACjD,OAAO,KAAK,CAAC;;;AAGf,MAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,GAAG,EACzC,OAAO,KAAK;;;AAGd,MAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,EAAC,EAAE;AAC5E,aAAS,EAAE,EAAC,WAAW,EAAE,IAAI,CAAC,GAAG,EAAC;AAClC,QAAI,EAAE,EAAC,eAAe,EAAE,CAAC,EAAC;GAC3B,CAAC,CAAC;;AAEH,MAAI,MAAM,GAAG,CAAC,EAAE;;AAEd,QAAI,GAAG,GAAG;AACR,YAAM,EAAE,IAAI,CAAC,GAAG;AAChB,kBAAY,EAAE,IAAI,IAAI,EAAE;KACzB,CAAC;AACF,qBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,cAAc,CAAC,CAAC;GAClD;;AAED,SAAO,IAAI,CAAC;CACb,CAAC;;AAEF,eAAe,GAAG,UAAU,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE;AACpD,MAAI,IAAI,GAAG,MAAM,CAAC,IAAI,EAAE;MACpB,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC;MACjC,cAAc,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAEzF,MAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,EACnD,OAAO,KAAK,CAAC;;;AAGf,MAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,EAAC,GAAG,EAAE,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE;AACpE,SAAK,EAAE,EAAC,WAAW,EAAE,IAAI,CAAC,GAAG,EAAC;AAC9B,QAAI,EAAE,EAAC,eAAe,EAAE,CAAC,CAAC,EAAC;GAC5B,CAAC,CAAC;;AAEH,MAAI,MAAM,GAAG,CAAC,EAAE;;AAEd,wBAAoB,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,cAAc,CAAC,CAAC;GACxD;AACD,SAAO,IAAI,CAAC;CACb,CAAC;;AAEF,MAAM,CAAC,OAAO,CAAC;AACb,eAAa,EAAE,UAAS,MAAM,EAAE;AAC9B,SAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACtB,WAAO,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;GAC/D;AACD,iBAAe,EAAE,UAAS,MAAM,EAAE;AAChC,SAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACtB,WAAO,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;GACjE;CACF,CAAC,CAAC,gG;;;;;;;;;;;;;;;;;;AC3IH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;AC5BA,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC;AAC9B,cAAY,EAAE,YAAW;;AAEvB,WAAO,MAAM,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE,CAAC;GAC3D;AACD,YAAU,EAAE,YAAW;AACrB,QAAI,IAAI,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AACzB,QAAI,CAAC,IAAI,EAAE,OAAO,KAAK,CAAC;;AAExB,WAAO,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;GAC9C;CACF,CAAC,CAAC;;AAEH,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC;AAC7B,yBAAuB,EAAE,UAAS,CAAC,EAAE,QAAQ,EAAE;AAC7C,KAAC,CAAC,cAAc,EAAE,CAAC;AACnB,QAAI,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE,EACjC,OAAO;;AAET,QAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,QAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE;AAClB,gBAAU,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC1B,cAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC,EAAE,MAAM,CAAC,CAAC;KACvD;;AAED,UAAM,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,GAAG,EAAE,UAAS,KAAK,EAAE,MAAM,EAAE;AAC7D,UAAI,MAAM,EACR,MAAM,CAAC,KAAK,CAAC,iBAAiB,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;KACtD,CAAC,CAAC;GACJ;;AAED,2BAAyB,EAAE,UAAS,CAAC,EAAE,QAAQ,EAAE;AAC/C,KAAC,CAAC,cAAc,EAAE,CAAC;AACnB,QAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,QAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE;AAClB,gBAAU,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AAC1B,cAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,qBAAqB,CAAC,EAAE,MAAM,CAAC,CAAC;KACvD;;AAED,UAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,GAAG,EAAE,UAAS,KAAK,EAAE,MAAM,EAAE;AAC/D,UAAI,MAAM,EACR,MAAM,CAAC,KAAK,CAAC,mBAAmB,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;KACxD,CAAC,CAAC;GACJ;CACF,CAAC,CAAC,gG;;;;;;;;;;;;;;;;;;AC9CH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;ACdA,QAAQ,CAAC,qBAAqB,CAAC,OAAO,CAAC;AACrC,WAAS,EAAE,YAAY;AACrB,QAAI,IAAI,GAAG,IAAI,CAAC;AAChB,WAAO;AACL,cAAQ,EAAE,oBAAoB;AAC9B,aAAO,EAAE;AACP,mBAAW,EAAE,IAAI;AACjB,kBAAU,EAAE,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC;AAClC,kBAAU,EAAE,UAAU,IAAI,EAAE;AAC1B,cAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;AAC5B,cAAI,IAAI,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,KAAK,EAAE,EAAC,MAAM,EAAE,IAAI,CAAC,GAAG,EAAC,CAAC,CAAC;AACjF,iBAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;SAC9D;OACF;AACD,WAAK,EAAE;AACL,YAAI,EAAE,qBAAqB;AAC3B,cAAM,EAAE,IAAI,CAAC,GAAG;AAChB,aAAK,EAAE,CAAC;OACT;KACF;GACF;CACF,CAAC,CAAC,gG;;;;;;;;;;;;;;;;;;ACrBH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qG","file":"/packages/telescope_subscribe-to-posts.js","sourcesContent":["TAPi18n.packages[\"telescope:subscribe-to-posts\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n// define the package's templates registrar\nregisterI18nTemplate = TAPi18n._getRegisterHelpersProxy(\"telescope:subscribe-to-posts\");\nregisterTemplate = registerI18nTemplate; // XXX OBSOLETE, kept for backward compatibility will be removed in the future\n\n// Record the list of templates prior to package load\nvar _ = Package.underscore._;\nnon_package_templates = _.keys(Template);\n","Users.addField({\n  fieldName: 'telescope.subscribedItems',\n  fieldSchema: {\n    type: Object,\n    optional: true,\n    blackbox: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nPosts.addField({\n  fieldName: 'subscribers',\n  fieldSchema: {\n    type: [String],\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nPosts.addField({\n  fieldName: 'subscriberCount',\n  fieldSchema: {\n    type: Number,\n    optional: true,\n    autoform: {\n      omit: true\n    }\n  }\n});\n\nTelescope.modules.add(\"profileEdit\", {\n  template: 'user_subscribed_posts',\n  order: 5\n});\n\nTelescope.modules.add(\"commentThreadBottom\", {\n  template: 'post_subscribe',\n  order: 10\n});\n\nPosts.views.add(\"userSubscribedPosts\", function (terms) {\n  var user = Meteor.users.findOne(terms.userId),\n      postsIds = [];\n\n  if (user && user.telescope.subscribedItems && user.telescope.subscribedItems.Posts) {\n    postsIds = _.pluck(user.telescope.subscribedItems.Posts, \"itemId\");\n  }\n\n  return {\n    find: {_id: {$in: postsIds}},\n    options: {limit: 5, sort: {postedAt: -1}}\n  };\n});\n\nvar hasSubscribedItem = function (item, user) {\n  return item.subscribers && item.subscribers.indexOf(user._id) != -1;\n};\n\nvar addSubscribedItem = function (userId, item, collectionName) {\n  var field = 'telescope.subscribedItems.' + collectionName;\n  var add = {};\n  add[field] = item;\n  Meteor.users.update({_id: userId}, {\n    $addToSet: add\n  });\n};\n\nvar removeSubscribedItem = function (userId, itemId, collectionName) {\n  var field = 'telescope.subscribedItems.' + collectionName;\n  var remove = {};\n  remove[field] = {itemId: itemId};\n  Meteor.users.update({_id: userId}, {\n    $pull: remove\n  });\n};\n\nsubscribeItem = function (collection, itemId, user) {\n  var item = collection.findOne(itemId),\n      collectionName = collection._name.slice(0,1).toUpperCase() + collection._name.slice(1);\n\n  if (!user || !item || hasSubscribedItem(item, user))\n    return false;\n\n  // author can't subscribe item\n  if (item.userId && item.userId === user._id)\n    return false\n\n  // Subscribe\n  var result = collection.update({_id: itemId, subscribers: { $ne: user._id }}, {\n    $addToSet: {subscribers: user._id},\n    $inc: {subscriberCount: 1}\n  });\n\n  if (result > 0) {\n    // Add item to list of subscribed items\n    var obj = {\n      itemId: item._id,\n      subscribedAt: new Date()\n    };\n    addSubscribedItem(user._id, obj, collectionName);\n  }\n\n  return true;\n};\n\nunsubscribeItem = function (collection, itemId, user) {\n  var user = Meteor.user(),\n      item = collection.findOne(itemId),\n      collectionName = collection._name.slice(0,1).toUpperCase()+collection._name.slice(1);\n\n  if (!user || !item  || !hasSubscribedItem(item, user))\n    return false;\n\n  // Unsubscribe\n  var result = collection.update({_id: itemId, subscribers: user._id }, {\n    $pull: {subscribers: user._id},\n    $inc: {subscriberCount: -1}\n  });\n\n  if (result > 0) {\n    // Remove item from list of subscribed items\n    removeSubscribedItem(user._id, itemId, collectionName);\n  }\n  return true;\n};\n\nMeteor.methods({\n  subscribePost: function(postId) {\n    check(postId, String);\n    return subscribeItem.call(this, Posts, postId, Meteor.user());\n  },\n  unsubscribePost: function(postId) {\n    check(postId, String);\n    return unsubscribeItem.call(this, Posts, postId, Meteor.user());\n  }\n});\n","\nTemplate.__checkName(\"post_subscribe\");\nTemplate[\"post_subscribe\"] = new Template(\"Template.post_subscribe\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"canSubscribe\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"post-subscribe module grid-block\"\n    }, \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"subscribed\"));\n    }, function() {\n      return [ \"\\n        \", HTML.A({\n        \"class\": \"unsubscribe-link\",\n        href: \"#\"\n      }, \"\\n          \", HTML.SPAN(Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"unsubscribe_from_thread\");\n      })), \"\\n        \"), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", HTML.A({\n        \"class\": \"subscribe-link\",\n        href: \"#\"\n      }, \"\\n          \", HTML.SPAN(Blaze.View(\"lookup:_\", function() {\n        return Spacebars.mustache(view.lookup(\"_\"), \"subscribe_to_thread\");\n      })), \"\\n        \"), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n","Template.post_subscribe.helpers({\n  canSubscribe: function() {\n    // you cannot subscribe to your own posts\n    return Meteor.userId() && this.userId !== Meteor.userId();\n  },\n  subscribed: function() {\n    var user = Meteor.user();\n    if (!user) return false;\n\n    return _.include(this.subscribers, user._id);\n  }\n});\n\nTemplate.post_subscribe.events({\n  'click .subscribe-link': function(e, instance) {\n    e.preventDefault();\n    if (this.userId === Meteor.userId())\n      return;\n\n    var post = this;\n\n    if (!Meteor.user()) {\n      FlowRouter.go('atSignIn');\n      Messages.flash(i18n.t(\"please_log_in_first\"), \"info\");\n    }\n\n    Meteor.call('subscribePost', post._id, function(error, result) {\n      if (result)\n        Events.track(\"post subscribed\", {'_id': post._id});\n    });\n  },\n\n  'click .unsubscribe-link': function(e, instance) {\n    e.preventDefault();\n    var post = this;\n\n    if (!Meteor.user()) {\n      FlowRouter.go('atSignIn');\n      Messages.flash(i18n.t(\"please_log_in_first\"), \"info\");\n    }\n\n    Meteor.call('unsubscribePost', post._id, function(error, result) {\n      if (result)\n        Events.track(\"post unsubscribed\", {'_id': post._id});\n    });\n  }\n});\n","\nTemplate.__checkName(\"user_subscribed_posts\");\nTemplate[\"user_subscribed_posts\"] = new Template(\"Template.user_subscribed_posts\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"user-profile-subscribed grid grid-small grid-module \"\n  }, \"\\n    \", HTML.H3(Blaze.View(\"lookup:_\", function() {\n    return Spacebars.mustache(view.lookup(\"_\"), \"subscribed_posts\");\n  })), \"\\n    \", Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"arguments\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"posts_list_controller\"));\n  }), \"\\n  \");\n}));\n","Template.user_subscribed_posts.helpers({\n  arguments: function () {\n    var user = this;\n    return {\n      template: \"posts_list_compact\",\n      options: {\n        currentUser: user,\n        fieldLabel: i18n.t(\"subscribedAt\"),\n        fieldValue: function (post) {\n          var user = this.currentUser;\n          var item = _.findWhere(user.telescope.subscribedItems.Posts, {itemId: post._id});\n          return moment(item.subscribedAt).format(\"MM/DD/YYYY, HH:mm\");\n        }\n      },\n      terms: {\n        view: 'userSubscribedPosts',\n        userId: user._id,\n        limit: 5\n      }\n    }\n  }\n});","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nvar package_templates = _.difference(_.keys(Template), non_package_templates);\n\nfor (var i = 0; i < package_templates.length; i++) {\n  var package_template = package_templates[i];\n\n  registerI18nTemplate(package_template);\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \ntranslations = {};\ntranslations[namespace] = {\"subscribed_posts\":\"Subscribed Posts\",\"subscribe_to_thread\":\"Subscribe to comment thread\",\"unsubscribe_from_thread\":\"Unsubscribe from comment thread\"};\nTAPi18n._loadLangFileObject(\"en\", translations);\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n","var _ = Package.underscore._,\n    package_name = \"telescope:subscribe-to-posts\",\n    namespace = \"telescope:subscribe-to-posts\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n"]}